[
  {
    "description": "remote ref",
    "schema": {"$ref": "http://localhost:1234/integer.json"},
    "tests": [
      {
        "description": "remote ref valid",
        "data": 1,
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#/$ref",
            "instanceLocation": "#",
            "keyword": "$ref"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#/$ref",
            "instanceLocation": "#",
            "keyword": "$ref"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#/$ref",
            "instanceLocation": "#",
            "keyword": "$ref",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/$ref",
                "absoluteKeywordLocation": "http://localhost:1234/integer.json#",
                "instanceLocation": "#",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/$ref/type",
                    "absoluteKeywordLocation": "http://localhost:1234/integer.json#/type",
                    "instanceLocation": "#",
                    "keyword": "type"
                  }
                ]
              }
            ]
          }
        }
      },
      {
        "description": "remote ref invalid",
        "data": "a",
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "keywordLocation": "#/$ref/type",
            "absoluteKeywordLocation": "http://localhost:1234/integer.json#/type",
            "instanceLocation": "#",
            "keyword": "type",
            "error": "Values of type \"string\" are not one of the allowed types \"integer\"."
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/$ref/type",
            "absoluteKeywordLocation": "http://localhost:1234/integer.json#/type",
            "instanceLocation": "#",
            "keyword": "type",
            "error": "Values of type \"string\" are not one of the allowed types \"integer\"."
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#/$ref",
            "instanceLocation": "#",
            "keyword": "$ref",
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/$ref",
                "absoluteKeywordLocation": "http://localhost:1234/integer.json#",
                "instanceLocation": "#",
                "errors": [
                  {
                    "valid": false,
                    "keywordLocation": "#/$ref/type",
                    "absoluteKeywordLocation": "http://localhost:1234/integer.json#/type",
                    "instanceLocation": "#",
                    "keyword": "type",
                    "error": "Values of type \"string\" are not one of the allowed types \"integer\"."
                  }
                ]
              }
            ]
          }
        }
      }
    ]
  },
  {
    "description": "fragment within remote ref",
    "schema": {"$ref": "http://localhost:1234/subSchemas.json#/integer"},
    "tests": [
      {
        "description": "remote fragment valid",
        "data": 1,
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#/$ref",
            "instanceLocation": "#",
            "keyword": "$ref"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#/$ref",
            "instanceLocation": "#",
            "keyword": "$ref"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#/$ref",
            "instanceLocation": "#",
            "keyword": "$ref",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/$ref",
                "absoluteKeywordLocation": "http://localhost:1234/subSchemas.json#/integer",
                "instanceLocation": "#",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/$ref/type",
                    "absoluteKeywordLocation": "http://localhost:1234/subSchemas.json#/integer/type",
                    "instanceLocation": "#",
                    "keyword": "type"
                  }
                ]
              }
            ]
          }
        }
      },
      {
        "description": "remote fragment invalid",
        "data": "a",
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "keywordLocation": "#/$ref/type",
            "absoluteKeywordLocation": "http://localhost:1234/subSchemas.json#/integer/type",
            "instanceLocation": "#",
            "keyword": "type",
            "error": "Values of type \"string\" are not one of the allowed types \"integer\"."
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/$ref/type",
            "absoluteKeywordLocation": "http://localhost:1234/subSchemas.json#/integer/type",
            "instanceLocation": "#",
            "keyword": "type",
            "error": "Values of type \"string\" are not one of the allowed types \"integer\"."
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#/$ref",
            "instanceLocation": "#",
            "keyword": "$ref",
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/$ref",
                "absoluteKeywordLocation": "http://localhost:1234/subSchemas.json#/integer",
                "instanceLocation": "#",
                "errors": [
                  {
                    "valid": false,
                    "keywordLocation": "#/$ref/type",
                    "absoluteKeywordLocation": "http://localhost:1234/subSchemas.json#/integer/type",
                    "instanceLocation": "#",
                    "keyword": "type",
                    "error": "Values of type \"string\" are not one of the allowed types \"integer\"."
                  }
                ]
              }
            ]
          }
        }
      }
    ]
  },
  {
    "description": "ref within remote ref",
    "schema": {"$ref": "http://localhost:1234/subSchemas.json#/refToInteger"},
    "tests": [
      {
        "description": "ref within ref valid",
        "data": 1,
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#/$ref",
            "instanceLocation": "#",
            "keyword": "$ref"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#/$ref",
            "instanceLocation": "#",
            "keyword": "$ref"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#/$ref",
            "instanceLocation": "#",
            "keyword": "$ref",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/$ref/$ref",
                "absoluteKeywordLocation": "http://localhost:1234/subSchemas.json#/refToInteger/$ref",
                "instanceLocation": "#",
                "keyword": "$ref",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/$ref/$ref",
                    "absoluteKeywordLocation": "http://localhost:1234/subSchemas.json#/integer",
                    "instanceLocation": "#",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/$ref/$ref/type",
                        "absoluteKeywordLocation": "http://localhost:1234/subSchemas.json#/integer/type",
                        "instanceLocation": "#",
                        "keyword": "type"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      },
      {
        "description": "ref within ref invalid",
        "data": "a",
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "keywordLocation": "#/$ref/$ref/type",
            "absoluteKeywordLocation": "http://localhost:1234/subSchemas.json#/integer/type",
            "instanceLocation": "#",
            "keyword": "type",
            "error": "Values of type \"string\" are not one of the allowed types \"integer\"."
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/$ref/$ref/type",
            "absoluteKeywordLocation": "http://localhost:1234/subSchemas.json#/integer/type",
            "instanceLocation": "#",
            "keyword": "type",
            "error": "Values of type \"string\" are not one of the allowed types \"integer\"."
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#/$ref",
            "instanceLocation": "#",
            "keyword": "$ref",
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/$ref/$ref",
                "absoluteKeywordLocation": "http://localhost:1234/subSchemas.json#/refToInteger/$ref",
                "instanceLocation": "#",
                "keyword": "$ref",
                "errors": [
                  {
                    "valid": false,
                    "keywordLocation": "#/$ref/$ref",
                    "absoluteKeywordLocation": "http://localhost:1234/subSchemas.json#/integer",
                    "instanceLocation": "#",
                    "errors": [
                      {
                        "valid": false,
                        "keywordLocation": "#/$ref/$ref/type",
                        "absoluteKeywordLocation": "http://localhost:1234/subSchemas.json#/integer/type",
                        "instanceLocation": "#",
                        "keyword": "type",
                        "error": "Values of type \"string\" are not one of the allowed types \"integer\"."
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      }
    ]
  },
  {
    "description": "base URI change",
    "schema": {
      "$id": "http://localhost:1234/",
      "items": {"$id": "folder/", "items": {"$ref": "folderInteger.json"}}
    },
    "tests": [
      {
        "description": "base URI change ref valid",
        "data": [[1]],
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/items",
                "instanceLocation": "#",
                "keyword": "items",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/items",
                    "instanceLocation": "#/0",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/items/items",
                        "instanceLocation": "#/0",
                        "keyword": "items",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/items/items/$ref",
                            "absoluteKeywordLocation": "http://localhost:1234/folder/#/items/items/$ref",
                            "instanceLocation": "#/0/0",
                            "keyword": "$ref",
                            "annotations": [
                              {
                                "valid": true,
                                "keywordLocation": "#/items/items/$ref",
                                "absoluteKeywordLocation": "http://localhost:1234/folder/folderInteger.json#",
                                "instanceLocation": "#/0/0",
                                "annotations": [
                                  {
                                    "valid": true,
                                    "keywordLocation": "#/items/items/$ref/type",
                                    "absoluteKeywordLocation": "http://localhost:1234/folder/folderInteger.json#/type",
                                    "instanceLocation": "#/0/0",
                                    "keyword": "type"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      },
      {
        "description": "base URI change ref invalid",
        "data": [["a"]],
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "keywordLocation": "#/items/items/$ref/type",
            "absoluteKeywordLocation": "http://localhost:1234/folder/folderInteger.json#/type",
            "instanceLocation": "#/0/0",
            "keyword": "type",
            "error": "Values of type \"string\" are not one of the allowed types \"integer\"."
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/items/items/$ref/type",
            "absoluteKeywordLocation": "http://localhost:1234/folder/folderInteger.json#/type",
            "instanceLocation": "#/0/0",
            "keyword": "type",
            "error": "Values of type \"string\" are not one of the allowed types \"integer\"."
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/items",
                "instanceLocation": "#",
                "keyword": "items",
                "errors": [
                  {
                    "valid": false,
                    "keywordLocation": "#/items",
                    "instanceLocation": "#/0",
                    "errors": [
                      {
                        "valid": false,
                        "keywordLocation": "#/items/items",
                        "instanceLocation": "#/0",
                        "keyword": "items",
                        "errors": [
                          {
                            "valid": false,
                            "keywordLocation": "#/items/items/$ref",
                            "absoluteKeywordLocation": "http://localhost:1234/folder/#/items/items/$ref",
                            "instanceLocation": "#/0/0",
                            "keyword": "$ref",
                            "errors": [
                              {
                                "valid": false,
                                "keywordLocation": "#/items/items/$ref",
                                "absoluteKeywordLocation": "http://localhost:1234/folder/folderInteger.json#",
                                "instanceLocation": "#/0/0",
                                "errors": [
                                  {
                                    "valid": false,
                                    "keywordLocation": "#/items/items/$ref/type",
                                    "absoluteKeywordLocation": "http://localhost:1234/folder/folderInteger.json#/type",
                                    "instanceLocation": "#/0/0",
                                    "keyword": "type",
                                    "error": "Values of type \"string\" are not one of the allowed types \"integer\"."
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      }
    ]
  },
  {
    "description": "base URI change - change folder",
    "schema": {
      "$id": "http://localhost:1234/scope_change_defs1.json",
      "type": "object",
      "properties": {"list": {"$ref": "#/definitions/baz"}},
      "definitions": {
        "baz": {
          "$id": "folder/",
          "type": "array",
          "items": {"$ref": "folderInteger.json"}
        }
      }
    },
    "tests": [
      {
        "description": "number is valid",
        "data": {"list": [1]},
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/type",
                "instanceLocation": "#",
                "keyword": "type"
              },
              {
                "valid": true,
                "keywordLocation": "#/properties",
                "instanceLocation": "#",
                "keyword": "properties",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/list/$ref",
                    "absoluteKeywordLocation": "http://localhost:1234/scope_change_defs1.json#/properties/list/$ref",
                    "instanceLocation": "#/list",
                    "keyword": "$ref",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/list/$ref",
                        "absoluteKeywordLocation": "http://localhost:1234/folder/#/definitions/baz",
                        "instanceLocation": "#/list",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/list/$ref/type",
                            "absoluteKeywordLocation": "http://localhost:1234/folder/#/definitions/baz/type",
                            "instanceLocation": "#/list",
                            "keyword": "type"
                          },
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/list/$ref/items",
                            "absoluteKeywordLocation": "http://localhost:1234/folder/#/definitions/baz/items",
                            "instanceLocation": "#/list",
                            "keyword": "items",
                            "annotations": [
                              {
                                "valid": true,
                                "keywordLocation": "#/properties/list/$ref/items/$ref",
                                "absoluteKeywordLocation": "http://localhost:1234/folder/#/definitions/baz/items/$ref",
                                "instanceLocation": "#/list/0",
                                "keyword": "$ref",
                                "annotations": [
                                  {
                                    "valid": true,
                                    "keywordLocation": "#/properties/list/$ref/items/$ref",
                                    "absoluteKeywordLocation": "http://localhost:1234/folder/folderInteger.json#",
                                    "instanceLocation": "#/list/0",
                                    "annotations": [
                                      {
                                        "valid": true,
                                        "keywordLocation": "#/properties/list/$ref/items/$ref/type",
                                        "absoluteKeywordLocation": "http://localhost:1234/folder/folderInteger.json#/type",
                                        "instanceLocation": "#/list/0",
                                        "keyword": "type"
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "valid": true,
                "keywordLocation": "#/definitions",
                "instanceLocation": "#",
                "keyword": "definitions"
              }
            ]
          }
        }
      },
      {
        "description": "string is invalid",
        "data": {"list": ["a"]},
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "keywordLocation": "#/properties/list/$ref/items/$ref/type",
            "absoluteKeywordLocation": "http://localhost:1234/folder/folderInteger.json#/type",
            "instanceLocation": "#/list/0",
            "keyword": "type",
            "error": "Values of type \"string\" are not one of the allowed types \"integer\"."
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/properties/list/$ref/items/$ref/type",
            "absoluteKeywordLocation": "http://localhost:1234/folder/folderInteger.json#/type",
            "instanceLocation": "#/list/0",
            "keyword": "type",
            "error": "Values of type \"string\" are not one of the allowed types \"integer\"."
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": true,
                "keywordLocation": "#/type",
                "instanceLocation": "#",
                "keyword": "type"
              },
              {
                "valid": false,
                "keywordLocation": "#/properties",
                "instanceLocation": "#",
                "keyword": "properties",
                "error": "At least one subschema failed validation.",
                "errors": [
                  {
                    "valid": false,
                    "keywordLocation": "#/properties/list/$ref",
                    "absoluteKeywordLocation": "http://localhost:1234/scope_change_defs1.json#/properties/list/$ref",
                    "instanceLocation": "#/list",
                    "keyword": "$ref",
                    "errors": [
                      {
                        "valid": false,
                        "keywordLocation": "#/properties/list/$ref",
                        "absoluteKeywordLocation": "http://localhost:1234/folder/#/definitions/baz",
                        "instanceLocation": "#/list",
                        "errors": [
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/list/$ref/type",
                            "absoluteKeywordLocation": "http://localhost:1234/folder/#/definitions/baz/type",
                            "instanceLocation": "#/list",
                            "keyword": "type"
                          },
                          {
                            "valid": false,
                            "keywordLocation": "#/properties/list/$ref/items",
                            "absoluteKeywordLocation": "http://localhost:1234/folder/#/definitions/baz/items",
                            "instanceLocation": "#/list",
                            "keyword": "items",
                            "errors": [
                              {
                                "valid": false,
                                "keywordLocation": "#/properties/list/$ref/items/$ref",
                                "absoluteKeywordLocation": "http://localhost:1234/folder/#/definitions/baz/items/$ref",
                                "instanceLocation": "#/list/0",
                                "keyword": "$ref",
                                "errors": [
                                  {
                                    "valid": false,
                                    "keywordLocation": "#/properties/list/$ref/items/$ref",
                                    "absoluteKeywordLocation": "http://localhost:1234/folder/folderInteger.json#",
                                    "instanceLocation": "#/list/0",
                                    "errors": [
                                      {
                                        "valid": false,
                                        "keywordLocation": "#/properties/list/$ref/items/$ref/type",
                                        "absoluteKeywordLocation": "http://localhost:1234/folder/folderInteger.json#/type",
                                        "instanceLocation": "#/list/0",
                                        "keyword": "type",
                                        "error": "Values of type \"string\" are not one of the allowed types \"integer\"."
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "valid": true,
                "keywordLocation": "#/definitions",
                "instanceLocation": "#",
                "keyword": "definitions"
              }
            ]
          }
        }
      }
    ]
  },
  {
    "description": "base URI change - change folder in subschema",
    "schema": {
      "$id": "http://localhost:1234/scope_change_defs2.json",
      "type": "object",
      "properties": {"list": {"$ref": "#/definitions/baz/definitions/bar"}},
      "definitions": {
        "baz": {
          "$id": "folder/",
          "definitions": {
            "bar": {"type": "array", "items": {"$ref": "folderInteger.json"}}
          }
        }
      }
    },
    "tests": [
      {
        "description": "number is valid",
        "data": {"list": [1]},
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/type",
                "instanceLocation": "#",
                "keyword": "type"
              },
              {
                "valid": true,
                "keywordLocation": "#/properties",
                "instanceLocation": "#",
                "keyword": "properties",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/list/$ref",
                    "absoluteKeywordLocation": "http://localhost:1234/scope_change_defs2.json#/properties/list/$ref",
                    "instanceLocation": "#/list",
                    "keyword": "$ref",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/list/$ref",
                        "absoluteKeywordLocation": "http://localhost:1234/folder/#/definitions/baz/definitions/bar",
                        "instanceLocation": "#/list",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/list/$ref/type",
                            "absoluteKeywordLocation": "http://localhost:1234/folder/#/definitions/baz/definitions/bar/type",
                            "instanceLocation": "#/list",
                            "keyword": "type"
                          },
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/list/$ref/items",
                            "absoluteKeywordLocation": "http://localhost:1234/folder/#/definitions/baz/definitions/bar/items",
                            "instanceLocation": "#/list",
                            "keyword": "items",
                            "annotations": [
                              {
                                "valid": true,
                                "keywordLocation": "#/properties/list/$ref/items/$ref",
                                "absoluteKeywordLocation": "http://localhost:1234/folder/#/definitions/baz/definitions/bar/items/$ref",
                                "instanceLocation": "#/list/0",
                                "keyword": "$ref",
                                "annotations": [
                                  {
                                    "valid": true,
                                    "keywordLocation": "#/properties/list/$ref/items/$ref",
                                    "absoluteKeywordLocation": "http://localhost:1234/folder/folderInteger.json#",
                                    "instanceLocation": "#/list/0",
                                    "annotations": [
                                      {
                                        "valid": true,
                                        "keywordLocation": "#/properties/list/$ref/items/$ref/type",
                                        "absoluteKeywordLocation": "http://localhost:1234/folder/folderInteger.json#/type",
                                        "instanceLocation": "#/list/0",
                                        "keyword": "type"
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "valid": true,
                "keywordLocation": "#/definitions",
                "instanceLocation": "#",
                "keyword": "definitions"
              }
            ]
          }
        }
      },
      {
        "description": "string is invalid",
        "data": {"list": ["a"]},
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "keywordLocation": "#/properties/list/$ref/items/$ref/type",
            "absoluteKeywordLocation": "http://localhost:1234/folder/folderInteger.json#/type",
            "instanceLocation": "#/list/0",
            "keyword": "type",
            "error": "Values of type \"string\" are not one of the allowed types \"integer\"."
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/properties/list/$ref/items/$ref/type",
            "absoluteKeywordLocation": "http://localhost:1234/folder/folderInteger.json#/type",
            "instanceLocation": "#/list/0",
            "keyword": "type",
            "error": "Values of type \"string\" are not one of the allowed types \"integer\"."
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": true,
                "keywordLocation": "#/type",
                "instanceLocation": "#",
                "keyword": "type"
              },
              {
                "valid": false,
                "keywordLocation": "#/properties",
                "instanceLocation": "#",
                "keyword": "properties",
                "error": "At least one subschema failed validation.",
                "errors": [
                  {
                    "valid": false,
                    "keywordLocation": "#/properties/list/$ref",
                    "absoluteKeywordLocation": "http://localhost:1234/scope_change_defs2.json#/properties/list/$ref",
                    "instanceLocation": "#/list",
                    "keyword": "$ref",
                    "errors": [
                      {
                        "valid": false,
                        "keywordLocation": "#/properties/list/$ref",
                        "absoluteKeywordLocation": "http://localhost:1234/folder/#/definitions/baz/definitions/bar",
                        "instanceLocation": "#/list",
                        "errors": [
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/list/$ref/type",
                            "absoluteKeywordLocation": "http://localhost:1234/folder/#/definitions/baz/definitions/bar/type",
                            "instanceLocation": "#/list",
                            "keyword": "type"
                          },
                          {
                            "valid": false,
                            "keywordLocation": "#/properties/list/$ref/items",
                            "absoluteKeywordLocation": "http://localhost:1234/folder/#/definitions/baz/definitions/bar/items",
                            "instanceLocation": "#/list",
                            "keyword": "items",
                            "errors": [
                              {
                                "valid": false,
                                "keywordLocation": "#/properties/list/$ref/items/$ref",
                                "absoluteKeywordLocation": "http://localhost:1234/folder/#/definitions/baz/definitions/bar/items/$ref",
                                "instanceLocation": "#/list/0",
                                "keyword": "$ref",
                                "errors": [
                                  {
                                    "valid": false,
                                    "keywordLocation": "#/properties/list/$ref/items/$ref",
                                    "absoluteKeywordLocation": "http://localhost:1234/folder/folderInteger.json#",
                                    "instanceLocation": "#/list/0",
                                    "errors": [
                                      {
                                        "valid": false,
                                        "keywordLocation": "#/properties/list/$ref/items/$ref/type",
                                        "absoluteKeywordLocation": "http://localhost:1234/folder/folderInteger.json#/type",
                                        "instanceLocation": "#/list/0",
                                        "keyword": "type",
                                        "error": "Values of type \"string\" are not one of the allowed types \"integer\"."
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "valid": true,
                "keywordLocation": "#/definitions",
                "instanceLocation": "#",
                "keyword": "definitions"
              }
            ]
          }
        }
      }
    ]
  },
  {
    "description": "root ref in remote ref",
    "schema": {
      "$id": "http://localhost:1234/object",
      "type": "object",
      "properties": {"name": {"$ref": "name.json#/definitions/orNull"}}
    },
    "tests": [
      {
        "description": "string is valid",
        "data": {"name": "foo"},
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/type",
                "instanceLocation": "#",
                "keyword": "type"
              },
              {
                "valid": true,
                "keywordLocation": "#/properties",
                "instanceLocation": "#",
                "keyword": "properties",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/name/$ref",
                    "absoluteKeywordLocation": "http://localhost:1234/object#/properties/name/$ref",
                    "instanceLocation": "#/name",
                    "keyword": "$ref",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/name/$ref",
                        "absoluteKeywordLocation": "http://localhost:1234/name.json#/definitions/orNull",
                        "instanceLocation": "#/name",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/name/$ref/anyOf",
                            "absoluteKeywordLocation": "http://localhost:1234/name.json#/definitions/orNull/anyOf",
                            "instanceLocation": "#/name",
                            "keyword": "anyOf",
                            "annotations": [
                              {
                                "valid": false,
                                "keywordLocation": "#/properties/name/$ref/anyOf/0",
                                "absoluteKeywordLocation": "http://localhost:1234/name.json#/definitions/orNull/anyOf/0",
                                "instanceLocation": "#/name",
                                "errors": [
                                  {
                                    "valid": false,
                                    "keywordLocation": "#/properties/name/$ref/anyOf/0/type",
                                    "absoluteKeywordLocation": "http://localhost:1234/name.json#/definitions/orNull/anyOf/0/type",
                                    "instanceLocation": "#/name",
                                    "keyword": "type",
                                    "error": "Values of type \"string\" are not one of the allowed types \"null\"."
                                  }
                                ]
                              },
                              {
                                "valid": true,
                                "keywordLocation": "#/properties/name/$ref/anyOf/1/$ref",
                                "absoluteKeywordLocation": "http://localhost:1234/name.json#/definitions/orNull/anyOf/1/$ref",
                                "instanceLocation": "#/name",
                                "keyword": "$ref",
                                "annotations": [
                                  {
                                    "valid": true,
                                    "keywordLocation": "#/properties/name/$ref/anyOf/1/$ref",
                                    "absoluteKeywordLocation": "http://localhost:1234/name.json#",
                                    "instanceLocation": "#/name",
                                    "annotations": [
                                      {
                                        "valid": true,
                                        "keywordLocation": "#/properties/name/$ref/anyOf/1/$ref/definitions",
                                        "absoluteKeywordLocation": "http://localhost:1234/name.json#/definitions",
                                        "instanceLocation": "#/name",
                                        "keyword": "definitions"
                                      },
                                      {
                                        "valid": true,
                                        "keywordLocation": "#/properties/name/$ref/anyOf/1/$ref/type",
                                        "absoluteKeywordLocation": "http://localhost:1234/name.json#/type",
                                        "instanceLocation": "#/name",
                                        "keyword": "type"
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      },
      {
        "description": "null is valid",
        "data": {"name": null},
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/type",
                "instanceLocation": "#",
                "keyword": "type"
              },
              {
                "valid": true,
                "keywordLocation": "#/properties",
                "instanceLocation": "#",
                "keyword": "properties",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/name/$ref",
                    "absoluteKeywordLocation": "http://localhost:1234/object#/properties/name/$ref",
                    "instanceLocation": "#/name",
                    "keyword": "$ref",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/name/$ref",
                        "absoluteKeywordLocation": "http://localhost:1234/name.json#/definitions/orNull",
                        "instanceLocation": "#/name",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/name/$ref/anyOf",
                            "absoluteKeywordLocation": "http://localhost:1234/name.json#/definitions/orNull/anyOf",
                            "instanceLocation": "#/name",
                            "keyword": "anyOf",
                            "annotations": [
                              {
                                "valid": true,
                                "keywordLocation": "#/properties/name/$ref/anyOf/0",
                                "absoluteKeywordLocation": "http://localhost:1234/name.json#/definitions/orNull/anyOf/0",
                                "instanceLocation": "#/name",
                                "annotations": [
                                  {
                                    "valid": true,
                                    "keywordLocation": "#/properties/name/$ref/anyOf/0/type",
                                    "absoluteKeywordLocation": "http://localhost:1234/name.json#/definitions/orNull/anyOf/0/type",
                                    "instanceLocation": "#/name",
                                    "keyword": "type"
                                  }
                                ]
                              },
                              {
                                "valid": false,
                                "keywordLocation": "#/properties/name/$ref/anyOf/1/$ref",
                                "absoluteKeywordLocation": "http://localhost:1234/name.json#/definitions/orNull/anyOf/1/$ref",
                                "instanceLocation": "#/name",
                                "keyword": "$ref",
                                "errors": [
                                  {
                                    "valid": false,
                                    "keywordLocation": "#/properties/name/$ref/anyOf/1/$ref",
                                    "absoluteKeywordLocation": "http://localhost:1234/name.json#",
                                    "instanceLocation": "#/name",
                                    "errors": [
                                      {
                                        "valid": true,
                                        "keywordLocation": "#/properties/name/$ref/anyOf/1/$ref/definitions",
                                        "absoluteKeywordLocation": "http://localhost:1234/name.json#/definitions",
                                        "instanceLocation": "#/name",
                                        "keyword": "definitions"
                                      },
                                      {
                                        "valid": false,
                                        "keywordLocation": "#/properties/name/$ref/anyOf/1/$ref/type",
                                        "absoluteKeywordLocation": "http://localhost:1234/name.json#/type",
                                        "instanceLocation": "#/name",
                                        "keyword": "type",
                                        "error": "Values of type \"null\" are not one of the allowed types \"string\"."
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      },
      {
        "description": "object is invalid",
        "data": {"name": {"name": null}},
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/properties/name/$ref/anyOf",
                "absoluteKeywordLocation": "http://localhost:1234/name.json#/definitions/orNull/anyOf",
                "instanceLocation": "#/name",
                "keyword": "anyOf"
              },
              {
                "valid": false,
                "keywordLocation": "#/properties/name/$ref/anyOf/0/type",
                "absoluteKeywordLocation": "http://localhost:1234/name.json#/definitions/orNull/anyOf/0/type",
                "instanceLocation": "#/name",
                "keyword": "type",
                "error": "Values of type \"object\" are not one of the allowed types \"null\"."
              },
              {
                "valid": false,
                "keywordLocation": "#/properties/name/$ref/anyOf/1/$ref/type",
                "absoluteKeywordLocation": "http://localhost:1234/name.json#/type",
                "instanceLocation": "#/name",
                "keyword": "type",
                "error": "Values of type \"object\" are not one of the allowed types \"string\"."
              }
            ]
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/properties/name/$ref/anyOf",
            "absoluteKeywordLocation": "http://localhost:1234/name.json#/definitions/orNull/anyOf",
            "instanceLocation": "#/name",
            "keyword": "anyOf",
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/properties/name/$ref/anyOf/0/type",
                "absoluteKeywordLocation": "http://localhost:1234/name.json#/definitions/orNull/anyOf/0/type",
                "instanceLocation": "#/name",
                "keyword": "type",
                "error": "Values of type \"object\" are not one of the allowed types \"null\"."
              },
              {
                "valid": false,
                "keywordLocation": "#/properties/name/$ref/anyOf/1/$ref/type",
                "absoluteKeywordLocation": "http://localhost:1234/name.json#/type",
                "instanceLocation": "#/name",
                "keyword": "type",
                "error": "Values of type \"object\" are not one of the allowed types \"string\"."
              }
            ]
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": true,
                "keywordLocation": "#/type",
                "instanceLocation": "#",
                "keyword": "type"
              },
              {
                "valid": false,
                "keywordLocation": "#/properties",
                "instanceLocation": "#",
                "keyword": "properties",
                "error": "At least one subschema failed validation.",
                "errors": [
                  {
                    "valid": false,
                    "keywordLocation": "#/properties/name/$ref",
                    "absoluteKeywordLocation": "http://localhost:1234/object#/properties/name/$ref",
                    "instanceLocation": "#/name",
                    "keyword": "$ref",
                    "errors": [
                      {
                        "valid": false,
                        "keywordLocation": "#/properties/name/$ref",
                        "absoluteKeywordLocation": "http://localhost:1234/name.json#/definitions/orNull",
                        "instanceLocation": "#/name",
                        "errors": [
                          {
                            "valid": false,
                            "keywordLocation": "#/properties/name/$ref/anyOf",
                            "absoluteKeywordLocation": "http://localhost:1234/name.json#/definitions/orNull/anyOf",
                            "instanceLocation": "#/name",
                            "keyword": "anyOf",
                            "errors": [
                              {
                                "valid": false,
                                "keywordLocation": "#/properties/name/$ref/anyOf/0",
                                "absoluteKeywordLocation": "http://localhost:1234/name.json#/definitions/orNull/anyOf/0",
                                "instanceLocation": "#/name",
                                "errors": [
                                  {
                                    "valid": false,
                                    "keywordLocation": "#/properties/name/$ref/anyOf/0/type",
                                    "absoluteKeywordLocation": "http://localhost:1234/name.json#/definitions/orNull/anyOf/0/type",
                                    "instanceLocation": "#/name",
                                    "keyword": "type",
                                    "error": "Values of type \"object\" are not one of the allowed types \"null\"."
                                  }
                                ]
                              },
                              {
                                "valid": false,
                                "keywordLocation": "#/properties/name/$ref/anyOf/1/$ref",
                                "absoluteKeywordLocation": "http://localhost:1234/name.json#/definitions/orNull/anyOf/1/$ref",
                                "instanceLocation": "#/name",
                                "keyword": "$ref",
                                "errors": [
                                  {
                                    "valid": false,
                                    "keywordLocation": "#/properties/name/$ref/anyOf/1/$ref",
                                    "absoluteKeywordLocation": "http://localhost:1234/name.json#",
                                    "instanceLocation": "#/name",
                                    "errors": [
                                      {
                                        "valid": true,
                                        "keywordLocation": "#/properties/name/$ref/anyOf/1/$ref/definitions",
                                        "absoluteKeywordLocation": "http://localhost:1234/name.json#/definitions",
                                        "instanceLocation": "#/name",
                                        "keyword": "definitions"
                                      },
                                      {
                                        "valid": false,
                                        "keywordLocation": "#/properties/name/$ref/anyOf/1/$ref/type",
                                        "absoluteKeywordLocation": "http://localhost:1234/name.json#/type",
                                        "instanceLocation": "#/name",
                                        "keyword": "type",
                                        "error": "Values of type \"object\" are not one of the allowed types \"string\"."
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      }
    ]
  }
]