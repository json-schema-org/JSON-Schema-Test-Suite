[
  {
    "description": "root pointer ref",
    "schema": {
      "properties": {"foo": {"$ref": "#"}},
      "additionalProperties": false
    },
    "tests": [
      {
        "description": "match",
        "data": {"foo": false},
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/properties",
                "instanceLocation": "#",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/foo/$ref",
                    "instanceLocation": "#/foo",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/foo/$ref",
                        "instanceLocation": "#/foo",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/foo/$ref/properties",
                            "instanceLocation": "#/foo"
                          },
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/foo/$ref/additionalProperties",
                            "instanceLocation": "#/foo"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "valid": true,
                "keywordLocation": "#/additionalProperties",
                "instanceLocation": "#"
              }
            ]
          }
        }
      },
      {
        "description": "recursive match",
        "data": {"foo": {"foo": false}},
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/properties",
                "instanceLocation": "#",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/foo/$ref",
                    "instanceLocation": "#/foo",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/foo/$ref",
                        "instanceLocation": "#/foo",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/foo/$ref/properties",
                            "instanceLocation": "#/foo",
                            "annotations": [
                              {
                                "valid": true,
                                "keywordLocation": "#/properties/foo/$ref/properties/foo/$ref",
                                "instanceLocation": "#/foo/foo",
                                "annotations": [
                                  {
                                    "valid": true,
                                    "keywordLocation": "#/properties/foo/$ref/properties/foo/$ref",
                                    "instanceLocation": "#/foo/foo",
                                    "annotations": [
                                      {
                                        "valid": true,
                                        "keywordLocation": "#/properties/foo/$ref/properties/foo/$ref/properties",
                                        "instanceLocation": "#/foo/foo"
                                      },
                                      {
                                        "valid": true,
                                        "keywordLocation": "#/properties/foo/$ref/properties/foo/$ref/additionalProperties",
                                        "instanceLocation": "#/foo/foo"
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/foo/$ref/additionalProperties",
                            "instanceLocation": "#/foo"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "valid": true,
                "keywordLocation": "#/additionalProperties",
                "instanceLocation": "#"
              }
            ]
          }
        }
      },
      {
        "description": "mismatch",
        "data": {"bar": false},
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "keywordLocation": "#/additionalProperties",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/additionalProperties",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": true,
                "keywordLocation": "#/properties",
                "instanceLocation": "#"
              },
              {
                "valid": false,
                "keywordLocation": "#/additionalProperties",
                "instanceLocation": "#"
              }
            ]
          }
        }
      },
      {
        "description": "recursive mismatch",
        "data": {"foo": {"bar": false}},
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "keywordLocation": "#/properties/foo/$ref/additionalProperties",
            "instanceLocation": "#/foo"
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/properties/foo/$ref/additionalProperties",
            "instanceLocation": "#/foo"
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/properties",
                "instanceLocation": "#",
                "errors": [
                  {
                    "valid": false,
                    "keywordLocation": "#/properties/foo/$ref",
                    "instanceLocation": "#/foo",
                    "errors": [
                      {
                        "valid": false,
                        "keywordLocation": "#/properties/foo/$ref",
                        "instanceLocation": "#/foo",
                        "errors": [
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/foo/$ref/properties",
                            "instanceLocation": "#/foo"
                          },
                          {
                            "valid": false,
                            "keywordLocation": "#/properties/foo/$ref/additionalProperties",
                            "instanceLocation": "#/foo"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "valid": true,
                "keywordLocation": "#/additionalProperties",
                "instanceLocation": "#"
              }
            ]
          }
        }
      }
    ]
  },
  {
    "description": "relative pointer ref to object",
    "schema": {
      "properties": {
        "foo": {"type": "integer"},
        "bar": {"$ref": "#/properties/foo"}
      }
    },
    "tests": [
      {
        "description": "match",
        "data": {"bar": 3},
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/properties",
                "instanceLocation": "#",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/bar/$ref",
                    "instanceLocation": "#/bar",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/bar/$ref",
                        "instanceLocation": "#/bar",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/bar/$ref/type",
                            "instanceLocation": "#/bar"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      },
      {
        "description": "mismatch",
        "data": {"bar": true},
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "keywordLocation": "#/properties/bar/$ref/type",
            "instanceLocation": "#/bar"
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/properties/bar/$ref/type",
            "instanceLocation": "#/bar"
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/properties",
                "instanceLocation": "#",
                "errors": [
                  {
                    "valid": false,
                    "keywordLocation": "#/properties/bar/$ref",
                    "instanceLocation": "#/bar",
                    "errors": [
                      {
                        "valid": false,
                        "keywordLocation": "#/properties/bar/$ref",
                        "instanceLocation": "#/bar",
                        "errors": [
                          {
                            "valid": false,
                            "keywordLocation": "#/properties/bar/$ref/type",
                            "instanceLocation": "#/bar"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      }
    ]
  },
  {
    "description": "relative pointer ref to array",
    "schema": {"items": [{"type": "integer"}, {"$ref": "#/items/0"}]},
    "tests": [
      {
        "description": "match array",
        "data": [1, 2],
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/items",
                "instanceLocation": "#",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/items/0",
                    "instanceLocation": "#/0",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/items/0/type",
                        "instanceLocation": "#/0"
                      }
                    ]
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/items/1/$ref",
                    "instanceLocation": "#/1",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/items/1/$ref",
                        "instanceLocation": "#/1",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/items/1/$ref/type",
                            "instanceLocation": "#/1"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      },
      {
        "description": "mismatch array",
        "data": [1, "foo"],
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "keywordLocation": "#/items/1/$ref/type",
            "instanceLocation": "#/1"
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/items/1/$ref/type",
            "instanceLocation": "#/1"
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/items",
                "instanceLocation": "#",
                "errors": [
                  {
                    "valid": true,
                    "keywordLocation": "#/items/0",
                    "instanceLocation": "#/0",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/items/0/type",
                        "instanceLocation": "#/0"
                      }
                    ]
                  },
                  {
                    "valid": false,
                    "keywordLocation": "#/items/1/$ref",
                    "instanceLocation": "#/1",
                    "errors": [
                      {
                        "valid": false,
                        "keywordLocation": "#/items/1/$ref",
                        "instanceLocation": "#/1",
                        "errors": [
                          {
                            "valid": false,
                            "keywordLocation": "#/items/1/$ref/type",
                            "instanceLocation": "#/1"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      }
    ]
  },
  {
    "description": "escaped pointer ref",
    "schema": {
      "properties": {
        "tilda": {"$ref": "#/tilda~0field"},
        "slash": {"$ref": "#/slash~1field"},
        "percent": {"$ref": "#/percent%25field"}
      },
      "tilda~field": {"type": "integer"},
      "slash/field": {"type": "integer"},
      "percent%field": {"type": "integer"}
    },
    "tests": [
      {
        "description": "slash invalid",
        "data": {"slash": "aoeu"},
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "keywordLocation": "#/properties/slash/$ref/type",
            "instanceLocation": "#/slash"
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/properties/slash/$ref/type",
            "instanceLocation": "#/slash"
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/properties",
                "instanceLocation": "#",
                "errors": [
                  {
                    "valid": false,
                    "keywordLocation": "#/properties/slash/$ref",
                    "instanceLocation": "#/slash",
                    "errors": [
                      {
                        "valid": false,
                        "keywordLocation": "#/properties/slash/$ref",
                        "instanceLocation": "#/slash",
                        "errors": [
                          {
                            "valid": false,
                            "keywordLocation": "#/properties/slash/$ref/type",
                            "instanceLocation": "#/slash"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      },
      {
        "description": "tilda invalid",
        "data": {"tilda": "aoeu"},
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "keywordLocation": "#/properties/tilda/$ref/type",
            "instanceLocation": "#/tilda"
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/properties/tilda/$ref/type",
            "instanceLocation": "#/tilda"
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/properties",
                "instanceLocation": "#",
                "errors": [
                  {
                    "valid": false,
                    "keywordLocation": "#/properties/tilda/$ref",
                    "instanceLocation": "#/tilda",
                    "errors": [
                      {
                        "valid": false,
                        "keywordLocation": "#/properties/tilda/$ref",
                        "instanceLocation": "#/tilda",
                        "errors": [
                          {
                            "valid": false,
                            "keywordLocation": "#/properties/tilda/$ref/type",
                            "instanceLocation": "#/tilda"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      },
      {
        "description": "percent invalid",
        "data": {"percent": "aoeu"},
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "keywordLocation": "#/properties/percent/$ref/type",
            "instanceLocation": "#/percent"
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/properties/percent/$ref/type",
            "instanceLocation": "#/percent"
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/properties",
                "instanceLocation": "#",
                "errors": [
                  {
                    "valid": false,
                    "keywordLocation": "#/properties/percent/$ref",
                    "instanceLocation": "#/percent",
                    "errors": [
                      {
                        "valid": false,
                        "keywordLocation": "#/properties/percent/$ref",
                        "instanceLocation": "#/percent",
                        "errors": [
                          {
                            "valid": false,
                            "keywordLocation": "#/properties/percent/$ref/type",
                            "instanceLocation": "#/percent"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      },
      {
        "description": "slash valid",
        "data": {"slash": 123},
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/properties",
                "instanceLocation": "#",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/slash/$ref",
                    "instanceLocation": "#/slash",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/slash/$ref",
                        "instanceLocation": "#/slash",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/slash/$ref/type",
                            "instanceLocation": "#/slash"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      },
      {
        "description": "tilda valid",
        "data": {"tilda": 123},
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/properties",
                "instanceLocation": "#",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/tilda/$ref",
                    "instanceLocation": "#/tilda",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/tilda/$ref",
                        "instanceLocation": "#/tilda",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/tilda/$ref/type",
                            "instanceLocation": "#/tilda"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      },
      {
        "description": "percent valid",
        "data": {"percent": 123},
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/properties",
                "instanceLocation": "#",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/percent/$ref",
                    "instanceLocation": "#/percent",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/percent/$ref",
                        "instanceLocation": "#/percent",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/percent/$ref/type",
                            "instanceLocation": "#/percent"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      }
    ]
  },
  {
    "description": "nested refs",
    "schema": {
      "$defs": {
        "a": {"type": "integer"},
        "b": {"$ref": "#/$defs/a"},
        "c": {"$ref": "#/$defs/b"}
      },
      "$ref": "#/$defs/c"
    },
    "tests": [
      {
        "description": "nested ref valid",
        "data": 5,
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#/$ref",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#/$ref",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#/$ref",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/$ref/$ref",
                "instanceLocation": "#",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/$ref/$ref/$ref",
                    "instanceLocation": "#",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/$ref/$ref/$ref",
                        "instanceLocation": "#",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/$ref/$ref/$ref/type",
                            "instanceLocation": "#"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      },
      {
        "description": "nested ref invalid",
        "data": "a",
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "keywordLocation": "#/$ref/$ref/$ref/type",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/$ref/$ref/$ref/type",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#/$ref",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/$ref/$ref",
                "instanceLocation": "#",
                "errors": [
                  {
                    "valid": false,
                    "keywordLocation": "#/$ref/$ref/$ref",
                    "instanceLocation": "#",
                    "errors": [
                      {
                        "valid": false,
                        "keywordLocation": "#/$ref/$ref/$ref",
                        "instanceLocation": "#",
                        "errors": [
                          {
                            "valid": false,
                            "keywordLocation": "#/$ref/$ref/$ref/type",
                            "instanceLocation": "#"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      }
    ]
  },
  {
    "description": "ref overrides any sibling keywords",
    "schema": {
      "$defs": {"reffed": {"type": "array"}},
      "properties": {"foo": {"$ref": "#/$defs/reffed", "maxItems": 2}}
    },
    "tests": [
      {
        "description": "ref valid",
        "data": {"foo": []},
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/$defs",
                "instanceLocation": "#"
              },
              {
                "valid": true,
                "keywordLocation": "#/properties",
                "instanceLocation": "#",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/foo/$ref",
                    "instanceLocation": "#/foo",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/foo/$ref",
                        "instanceLocation": "#/foo",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/foo/$ref/type",
                            "instanceLocation": "#/foo"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      },
      {
        "description": "ref valid, maxItems ignored",
        "data": {"foo": [1, 2, 3]},
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/$defs",
                "instanceLocation": "#"
              },
              {
                "valid": true,
                "keywordLocation": "#/properties",
                "instanceLocation": "#",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/foo/$ref",
                    "instanceLocation": "#/foo",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/foo/$ref",
                        "instanceLocation": "#/foo",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/foo/$ref/type",
                            "instanceLocation": "#/foo"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      },
      {
        "description": "ref invalid",
        "data": {"foo": "string"},
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "keywordLocation": "#/properties/foo/$ref/type",
            "instanceLocation": "#/foo"
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/properties/foo/$ref/type",
            "instanceLocation": "#/foo"
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": true,
                "keywordLocation": "#/$defs",
                "instanceLocation": "#"
              },
              {
                "valid": false,
                "keywordLocation": "#/properties",
                "instanceLocation": "#",
                "errors": [
                  {
                    "valid": false,
                    "keywordLocation": "#/properties/foo/$ref",
                    "instanceLocation": "#/foo",
                    "errors": [
                      {
                        "valid": false,
                        "keywordLocation": "#/properties/foo/$ref",
                        "instanceLocation": "#/foo",
                        "errors": [
                          {
                            "valid": false,
                            "keywordLocation": "#/properties/foo/$ref/type",
                            "instanceLocation": "#/foo"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      }
    ]
  },
  {
    "description": "remote ref, containing refs itself",
    "schema": {"$ref": "http://json-schema.org/draft/2019-06/schema#"},
    "tests": [
      {
        "description": "remote ref valid",
        "data": {"minLength": 1},
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/$ref",
                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/schema#",
                "instanceLocation": "#"
              },
              {
                "valid": true,
                "keywordLocation": "#/$ref/title",
                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/schema#/title",
                "instanceLocation": "#",
                "annotation": "Core schema meta-schema"
              },
              {
                "valid": true,
                "keywordLocation": "#/$ref/allOf",
                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/schema#/allOf",
                "instanceLocation": "#",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/$ref/allOf/0/$ref/title",
                    "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/core#/title",
                    "instanceLocation": "#",
                    "annotation": "Core vocabulary meta-schema"
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/$ref/allOf/1/$ref/title",
                    "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/applicator#/title",
                    "instanceLocation": "#",
                    "annotation": "Applicator vocabulary meta-schema"
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/$ref/allOf/2/$ref/title",
                    "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/validation#/title",
                    "instanceLocation": "#",
                    "annotation": "Validation vocabulary meta-schema"
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/$ref/allOf/3/$ref/title",
                    "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/meta-data#/title",
                    "instanceLocation": "#",
                    "annotation": "Meta-data vocabulary meta-schema"
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/$ref/allOf/4/$ref/title",
                    "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/format#/title",
                    "instanceLocation": "#",
                    "annotation": "Format vocabulary meta-schema"
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/$ref/allOf/5/$ref/title",
                    "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/content#/title",
                    "instanceLocation": "#",
                    "annotation": "Content vocabulary meta-schema"
                  }
                ]
              },
              {
                "valid": true,
                "keywordLocation": "#/$ref/allOf/0/$ref/title",
                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/core#/title",
                "instanceLocation": "#",
                "annotation": "Core vocabulary meta-schema"
              },
              {
                "valid": true,
                "keywordLocation": "#/$ref/allOf/1/$ref/title",
                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/applicator#/title",
                "instanceLocation": "#",
                "annotation": "Applicator vocabulary meta-schema"
              },
              {
                "valid": true,
                "keywordLocation": "#/$ref/allOf/2/$ref/title",
                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/validation#/title",
                "instanceLocation": "#",
                "annotation": "Validation vocabulary meta-schema"
              },
              {
                "valid": true,
                "keywordLocation": "#/$ref/allOf/3/$ref/title",
                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/meta-data#/title",
                "instanceLocation": "#",
                "annotation": "Meta-data vocabulary meta-schema"
              },
              {
                "valid": true,
                "keywordLocation": "#/$ref/allOf/4/$ref/title",
                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/format#/title",
                "instanceLocation": "#",
                "annotation": "Format vocabulary meta-schema"
              },
              {
                "valid": true,
                "keywordLocation": "#/$ref/allOf/5/$ref/title",
                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/content#/title",
                "instanceLocation": "#",
                "annotation": "Content vocabulary meta-schema"
              }
            ]
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#/$ref",
            "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/schema#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/$ref/title",
                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/schema#/title",
                "instanceLocation": "#",
                "annotation": "Core schema meta-schema"
              },
              {
                "valid": true,
                "keywordLocation": "#/$ref/allOf",
                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/schema#/allOf",
                "instanceLocation": "#",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/$ref/allOf/0/$ref/title",
                    "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/core#/title",
                    "instanceLocation": "#",
                    "annotation": "Core vocabulary meta-schema"
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/$ref/allOf/1/$ref/title",
                    "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/applicator#/title",
                    "instanceLocation": "#",
                    "annotation": "Applicator vocabulary meta-schema"
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/$ref/allOf/2/$ref/title",
                    "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/validation#/title",
                    "instanceLocation": "#",
                    "annotation": "Validation vocabulary meta-schema"
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/$ref/allOf/3/$ref/title",
                    "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/meta-data#/title",
                    "instanceLocation": "#",
                    "annotation": "Meta-data vocabulary meta-schema"
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/$ref/allOf/4/$ref/title",
                    "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/format#/title",
                    "instanceLocation": "#",
                    "annotation": "Format vocabulary meta-schema"
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/$ref/allOf/5/$ref/title",
                    "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/content#/title",
                    "instanceLocation": "#",
                    "annotation": "Content vocabulary meta-schema"
                  }
                ]
              }
            ]
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#/$ref",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/$ref",
                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/schema#",
                "instanceLocation": "#",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/$ref/title",
                    "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/schema#/title",
                    "instanceLocation": "#",
                    "annotation": "Core schema meta-schema"
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/$ref/allOf",
                    "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/schema#/allOf",
                    "instanceLocation": "#",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/$ref/allOf/0/$ref",
                        "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/schema#/allOf/0/$ref",
                        "instanceLocation": "#",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/$ref/allOf/0/$ref",
                            "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/core#",
                            "instanceLocation": "#",
                            "annotations": [
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/0/$ref/title",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/core#/title",
                                "instanceLocation": "#",
                                "annotation": "Core vocabulary meta-schema"
                              },
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/0/$ref/type",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/core#/type",
                                "instanceLocation": "#"
                              },
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/0/$ref/properties",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/core#/properties",
                                "instanceLocation": "#"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "valid": true,
                        "keywordLocation": "#/$ref/allOf/1/$ref",
                        "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/schema#/allOf/1/$ref",
                        "instanceLocation": "#",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/$ref/allOf/1/$ref",
                            "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/applicator#",
                            "instanceLocation": "#",
                            "annotations": [
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/1/$ref/title",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/applicator#/title",
                                "instanceLocation": "#",
                                "annotation": "Applicator vocabulary meta-schema"
                              },
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/1/$ref/properties",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/applicator#/properties",
                                "instanceLocation": "#"
                              },
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/1/$ref/$defs",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/applicator#/$defs",
                                "instanceLocation": "#"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "valid": true,
                        "keywordLocation": "#/$ref/allOf/2/$ref",
                        "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/schema#/allOf/2/$ref",
                        "instanceLocation": "#",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/$ref/allOf/2/$ref",
                            "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/validation#",
                            "instanceLocation": "#",
                            "annotations": [
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/2/$ref/title",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/validation#/title",
                                "instanceLocation": "#",
                                "annotation": "Validation vocabulary meta-schema"
                              },
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/2/$ref/type",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/validation#/type",
                                "instanceLocation": "#"
                              },
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/2/$ref/properties",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/validation#/properties",
                                "instanceLocation": "#",
                                "annotations": [
                                  {
                                    "valid": true,
                                    "keywordLocation": "#/$ref/allOf/2/$ref/properties/minLength/$ref",
                                    "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/validation#/properties/minLength/$ref",
                                    "instanceLocation": "#/minLength",
                                    "annotations": [
                                      {
                                        "valid": true,
                                        "keywordLocation": "#/$ref/allOf/2/$ref/properties/minLength/$ref/$ref",
                                        "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/validation#/$defs/nonNegativeIntegerDefault0/$ref",
                                        "instanceLocation": "#/minLength",
                                        "annotations": [
                                          {
                                            "valid": true,
                                            "keywordLocation": "#/$ref/allOf/2/$ref/properties/minLength/$ref/$ref",
                                            "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/validation#/$defs/nonNegativeInteger",
                                            "instanceLocation": "#/minLength",
                                            "annotations": [
                                              {
                                                "valid": true,
                                                "keywordLocation": "#/$ref/allOf/2/$ref/properties/minLength/$ref/$ref/type",
                                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/validation#/$defs/nonNegativeInteger/type",
                                                "instanceLocation": "#/minLength"
                                              },
                                              {
                                                "valid": true,
                                                "keywordLocation": "#/$ref/allOf/2/$ref/properties/minLength/$ref/$ref/minimum",
                                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/validation#/$defs/nonNegativeInteger/minimum",
                                                "instanceLocation": "#/minLength"
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/2/$ref/$defs",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/validation#/$defs",
                                "instanceLocation": "#"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "valid": true,
                        "keywordLocation": "#/$ref/allOf/3/$ref",
                        "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/schema#/allOf/3/$ref",
                        "instanceLocation": "#",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/$ref/allOf/3/$ref",
                            "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/meta-data#",
                            "instanceLocation": "#",
                            "annotations": [
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/3/$ref/title",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/meta-data#/title",
                                "instanceLocation": "#",
                                "annotation": "Meta-data vocabulary meta-schema"
                              },
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/3/$ref/properties",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/meta-data#/properties",
                                "instanceLocation": "#"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "valid": true,
                        "keywordLocation": "#/$ref/allOf/4/$ref",
                        "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/schema#/allOf/4/$ref",
                        "instanceLocation": "#",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/$ref/allOf/4/$ref",
                            "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/format#",
                            "instanceLocation": "#",
                            "annotations": [
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/4/$ref/title",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/format#/title",
                                "instanceLocation": "#",
                                "annotation": "Format vocabulary meta-schema"
                              },
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/4/$ref/type",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/format#/type",
                                "instanceLocation": "#"
                              },
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/4/$ref/properties",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/format#/properties",
                                "instanceLocation": "#"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "valid": true,
                        "keywordLocation": "#/$ref/allOf/5/$ref",
                        "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/schema#/allOf/5/$ref",
                        "instanceLocation": "#",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/$ref/allOf/5/$ref",
                            "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/content#",
                            "instanceLocation": "#",
                            "annotations": [
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/5/$ref/title",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/content#/title",
                                "instanceLocation": "#",
                                "annotation": "Content vocabulary meta-schema"
                              },
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/5/$ref/type",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/content#/type",
                                "instanceLocation": "#"
                              },
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/5/$ref/properties",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/content#/properties",
                                "instanceLocation": "#"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/$ref/type",
                    "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/schema#/type",
                    "instanceLocation": "#"
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/$ref/properties",
                    "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/schema#/properties",
                    "instanceLocation": "#"
                  }
                ]
              }
            ]
          }
        }
      },
      {
        "description": "remote ref invalid",
        "data": {"minLength": -1},
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "keywordLocation": "#/$ref/allOf/2/$ref/properties/minLength/$ref/$ref/minimum",
            "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/validation#/$defs/nonNegativeInteger/minimum",
            "instanceLocation": "#/minLength"
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/$ref/allOf/2/$ref/properties/minLength/$ref/$ref/minimum",
            "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/validation#/$defs/nonNegativeInteger/minimum",
            "instanceLocation": "#/minLength"
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#/$ref",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/$ref",
                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/schema#",
                "instanceLocation": "#",
                "errors": [
                  {
                    "valid": true,
                    "keywordLocation": "#/$ref/title",
                    "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/schema#/title",
                    "instanceLocation": "#",
                    "annotation": "Core schema meta-schema"
                  },
                  {
                    "valid": false,
                    "keywordLocation": "#/$ref/allOf",
                    "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/schema#/allOf",
                    "instanceLocation": "#",
                    "errors": [
                      {
                        "valid": true,
                        "keywordLocation": "#/$ref/allOf/0/$ref",
                        "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/schema#/allOf/0/$ref",
                        "instanceLocation": "#",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/$ref/allOf/0/$ref",
                            "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/core#",
                            "instanceLocation": "#",
                            "annotations": [
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/0/$ref/title",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/core#/title",
                                "instanceLocation": "#",
                                "annotation": "Core vocabulary meta-schema"
                              },
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/0/$ref/type",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/core#/type",
                                "instanceLocation": "#"
                              },
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/0/$ref/properties",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/core#/properties",
                                "instanceLocation": "#"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "valid": true,
                        "keywordLocation": "#/$ref/allOf/1/$ref",
                        "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/schema#/allOf/1/$ref",
                        "instanceLocation": "#",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/$ref/allOf/1/$ref",
                            "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/applicator#",
                            "instanceLocation": "#",
                            "annotations": [
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/1/$ref/title",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/applicator#/title",
                                "instanceLocation": "#",
                                "annotation": "Applicator vocabulary meta-schema"
                              },
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/1/$ref/properties",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/applicator#/properties",
                                "instanceLocation": "#"
                              },
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/1/$ref/$defs",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/applicator#/$defs",
                                "instanceLocation": "#"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "valid": false,
                        "keywordLocation": "#/$ref/allOf/2/$ref",
                        "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/schema#/allOf/2/$ref",
                        "instanceLocation": "#",
                        "errors": [
                          {
                            "valid": false,
                            "keywordLocation": "#/$ref/allOf/2/$ref",
                            "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/validation#",
                            "instanceLocation": "#",
                            "errors": [
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/2/$ref/title",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/validation#/title",
                                "instanceLocation": "#",
                                "annotation": "Validation vocabulary meta-schema"
                              },
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/2/$ref/type",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/validation#/type",
                                "instanceLocation": "#"
                              },
                              {
                                "valid": false,
                                "keywordLocation": "#/$ref/allOf/2/$ref/properties",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/validation#/properties",
                                "instanceLocation": "#",
                                "errors": [
                                  {
                                    "valid": false,
                                    "keywordLocation": "#/$ref/allOf/2/$ref/properties/minLength/$ref",
                                    "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/validation#/properties/minLength/$ref",
                                    "instanceLocation": "#/minLength",
                                    "errors": [
                                      {
                                        "valid": false,
                                        "keywordLocation": "#/$ref/allOf/2/$ref/properties/minLength/$ref/$ref",
                                        "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/validation#/$defs/nonNegativeIntegerDefault0/$ref",
                                        "instanceLocation": "#/minLength",
                                        "errors": [
                                          {
                                            "valid": false,
                                            "keywordLocation": "#/$ref/allOf/2/$ref/properties/minLength/$ref/$ref",
                                            "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/validation#/$defs/nonNegativeInteger",
                                            "instanceLocation": "#/minLength",
                                            "errors": [
                                              {
                                                "valid": true,
                                                "keywordLocation": "#/$ref/allOf/2/$ref/properties/minLength/$ref/$ref/type",
                                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/validation#/$defs/nonNegativeInteger/type",
                                                "instanceLocation": "#/minLength"
                                              },
                                              {
                                                "valid": false,
                                                "keywordLocation": "#/$ref/allOf/2/$ref/properties/minLength/$ref/$ref/minimum",
                                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/validation#/$defs/nonNegativeInteger/minimum",
                                                "instanceLocation": "#/minLength"
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/2/$ref/$defs",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/validation#/$defs",
                                "instanceLocation": "#"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "valid": true,
                        "keywordLocation": "#/$ref/allOf/3/$ref",
                        "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/schema#/allOf/3/$ref",
                        "instanceLocation": "#",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/$ref/allOf/3/$ref",
                            "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/meta-data#",
                            "instanceLocation": "#",
                            "annotations": [
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/3/$ref/title",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/meta-data#/title",
                                "instanceLocation": "#",
                                "annotation": "Meta-data vocabulary meta-schema"
                              },
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/3/$ref/properties",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/meta-data#/properties",
                                "instanceLocation": "#"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "valid": true,
                        "keywordLocation": "#/$ref/allOf/4/$ref",
                        "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/schema#/allOf/4/$ref",
                        "instanceLocation": "#",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/$ref/allOf/4/$ref",
                            "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/format#",
                            "instanceLocation": "#",
                            "annotations": [
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/4/$ref/title",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/format#/title",
                                "instanceLocation": "#",
                                "annotation": "Format vocabulary meta-schema"
                              },
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/4/$ref/type",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/format#/type",
                                "instanceLocation": "#"
                              },
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/4/$ref/properties",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/format#/properties",
                                "instanceLocation": "#"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "valid": true,
                        "keywordLocation": "#/$ref/allOf/5/$ref",
                        "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/schema#/allOf/5/$ref",
                        "instanceLocation": "#",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/$ref/allOf/5/$ref",
                            "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/content#",
                            "instanceLocation": "#",
                            "annotations": [
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/5/$ref/title",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/content#/title",
                                "instanceLocation": "#",
                                "annotation": "Content vocabulary meta-schema"
                              },
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/5/$ref/type",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/content#/type",
                                "instanceLocation": "#"
                              },
                              {
                                "valid": true,
                                "keywordLocation": "#/$ref/allOf/5/$ref/properties",
                                "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/meta/content#/properties",
                                "instanceLocation": "#"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/$ref/type",
                    "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/schema#/type",
                    "instanceLocation": "#"
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/$ref/properties",
                    "absoluteKeywordLocation": "http://json-schema.org/draft/2019-06/schema#/properties",
                    "instanceLocation": "#"
                  }
                ]
              }
            ]
          }
        }
      }
    ]
  },
  {
    "description": "property named $ref that is not a reference",
    "schema": {"properties": {"$ref": {"type": "string"}}},
    "tests": [
      {
        "description": "property named $ref valid",
        "data": {"$ref": "a"},
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/properties",
                "instanceLocation": "#",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/$ref",
                    "instanceLocation": "#/$ref",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/$ref/type",
                        "instanceLocation": "#/$ref"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      },
      {
        "description": "property named $ref invalid",
        "data": {"$ref": 2},
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "keywordLocation": "#/properties/$ref/type",
            "instanceLocation": "#/$ref"
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/properties/$ref/type",
            "instanceLocation": "#/$ref"
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/properties",
                "instanceLocation": "#",
                "errors": [
                  {
                    "valid": false,
                    "keywordLocation": "#/properties/$ref",
                    "instanceLocation": "#/$ref",
                    "errors": [
                      {
                        "valid": false,
                        "keywordLocation": "#/properties/$ref/type",
                        "instanceLocation": "#/$ref"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      }
    ]
  },
  {
    "description": "$ref to boolean schema true",
    "schema": {"$ref": "#/$defs/bool", "$defs": {"bool": true}},
    "tests": [
      {
        "description": "any value is valid",
        "data": "foo",
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#/$ref",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#/$ref",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#/$ref",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/$ref",
                "instanceLocation": "#"
              }
            ]
          }
        }
      }
    ]
  },
  {
    "description": "$ref to boolean schema false",
    "schema": {"$ref": "#/$defs/bool", "$defs": {"bool": false}},
    "tests": [
      {
        "description": "any value is invalid",
        "data": "foo",
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "keywordLocation": "#/$ref",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/$ref",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#/$ref",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/$ref",
                "instanceLocation": "#"
              }
            ]
          }
        }
      }
    ]
  },
  {
    "description": "Recursive references between schemas",
    "schema": {
      "$id": "http://localhost:1234/tree",
      "description": "tree of nodes",
      "type": "object",
      "properties": {
        "meta": {"type": "string"},
        "nodes": {"type": "array", "items": {"$ref": "node"}}
      },
      "required": ["meta", "nodes"],
      "$defs": {
        "node": {
          "$id": "http://localhost:1234/node",
          "description": "node",
          "type": "object",
          "properties": {
            "value": {"type": "number"},
            "subtree": {"$ref": "tree"}
          },
          "required": ["value"]
        }
      }
    },
    "tests": [
      {
        "description": "valid tree",
        "data": {
          "meta": "root",
          "nodes": [
            {
              "value": 1,
              "subtree": {
                "meta": "child",
                "nodes": [{"value": 1.1}, {"value": 1.2}]
              }
            },
            {
              "value": 2,
              "subtree": {
                "meta": "child",
                "nodes": [{"value": 2.1}, {"value": 2.2}]
              }
            }
          ]
        },
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "annotations": [
              {"valid": true, "keywordLocation": "#", "instanceLocation": "#"},
              {
                "valid": true,
                "keywordLocation": "#/description",
                "instanceLocation": "#",
                "annotation": "tree of nodes"
              },
              {
                "valid": true,
                "keywordLocation": "#/properties/nodes/items",
                "instanceLocation": "#/nodes",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/nodes/items/$ref",
                    "absoluteKeywordLocation": "http://localhost:1234/node#",
                    "instanceLocation": "#/nodes/0",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/nodes/items/$ref/description",
                        "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                        "instanceLocation": "#/nodes/0",
                        "annotation": "node"
                      },
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref",
                        "absoluteKeywordLocation": "http://localhost:1234/tree#",
                        "instanceLocation": "#/nodes/0/subtree",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/description",
                            "absoluteKeywordLocation": "http://localhost:1234/tree#/description",
                            "instanceLocation": "#/nodes/0/subtree",
                            "annotation": "tree of nodes"
                          },
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items",
                            "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes/items",
                            "instanceLocation": "#/nodes/0/subtree/nodes",
                            "annotations": [
                              {
                                "valid": true,
                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                                "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                                "instanceLocation": "#/nodes/0/subtree/nodes/0",
                                "annotation": "node"
                              },
                              {
                                "valid": true,
                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                                "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                                "instanceLocation": "#/nodes/0/subtree/nodes/1",
                                "annotation": "node"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/nodes/items/$ref",
                    "absoluteKeywordLocation": "http://localhost:1234/node#",
                    "instanceLocation": "#/nodes/1",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/nodes/items/$ref/description",
                        "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                        "instanceLocation": "#/nodes/1",
                        "annotation": "node"
                      },
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref",
                        "absoluteKeywordLocation": "http://localhost:1234/tree#",
                        "instanceLocation": "#/nodes/1/subtree",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/description",
                            "absoluteKeywordLocation": "http://localhost:1234/tree#/description",
                            "instanceLocation": "#/nodes/1/subtree",
                            "annotation": "tree of nodes"
                          },
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items",
                            "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes/items",
                            "instanceLocation": "#/nodes/1/subtree/nodes",
                            "annotations": [
                              {
                                "valid": true,
                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                                "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                                "instanceLocation": "#/nodes/1/subtree/nodes/0",
                                "annotation": "node"
                              },
                              {
                                "valid": true,
                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                                "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                                "instanceLocation": "#/nodes/1/subtree/nodes/1",
                                "annotation": "node"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "valid": true,
                "keywordLocation": "#/properties/nodes/items/$ref",
                "absoluteKeywordLocation": "http://localhost:1234/node#",
                "instanceLocation": "#/nodes/0",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/nodes/items/$ref/description",
                    "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                    "instanceLocation": "#/nodes/0",
                    "annotation": "node"
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref",
                    "absoluteKeywordLocation": "http://localhost:1234/tree#",
                    "instanceLocation": "#/nodes/0/subtree",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/description",
                        "absoluteKeywordLocation": "http://localhost:1234/tree#/description",
                        "instanceLocation": "#/nodes/0/subtree",
                        "annotation": "tree of nodes"
                      },
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items",
                        "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes/items",
                        "instanceLocation": "#/nodes/0/subtree/nodes",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                            "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                            "instanceLocation": "#/nodes/0/subtree/nodes/0",
                            "annotation": "node"
                          },
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                            "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                            "instanceLocation": "#/nodes/0/subtree/nodes/1",
                            "annotation": "node"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "valid": true,
                "keywordLocation": "#/properties/nodes/items/$ref",
                "absoluteKeywordLocation": "http://localhost:1234/node#",
                "instanceLocation": "#/nodes/1",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/nodes/items/$ref/description",
                    "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                    "instanceLocation": "#/nodes/1",
                    "annotation": "node"
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref",
                    "absoluteKeywordLocation": "http://localhost:1234/tree#",
                    "instanceLocation": "#/nodes/1/subtree",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/description",
                        "absoluteKeywordLocation": "http://localhost:1234/tree#/description",
                        "instanceLocation": "#/nodes/1/subtree",
                        "annotation": "tree of nodes"
                      },
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items",
                        "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes/items",
                        "instanceLocation": "#/nodes/1/subtree/nodes",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                            "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                            "instanceLocation": "#/nodes/1/subtree/nodes/0",
                            "annotation": "node"
                          },
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                            "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                            "instanceLocation": "#/nodes/1/subtree/nodes/1",
                            "annotation": "node"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "valid": true,
                "keywordLocation": "#/properties/nodes/items/$ref/description",
                "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                "instanceLocation": "#/nodes/0",
                "annotation": "node"
              },
              {
                "valid": true,
                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref",
                "absoluteKeywordLocation": "http://localhost:1234/tree#",
                "instanceLocation": "#/nodes/0/subtree",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/description",
                    "absoluteKeywordLocation": "http://localhost:1234/tree#/description",
                    "instanceLocation": "#/nodes/0/subtree",
                    "annotation": "tree of nodes"
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items",
                    "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes/items",
                    "instanceLocation": "#/nodes/0/subtree/nodes",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                        "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                        "instanceLocation": "#/nodes/0/subtree/nodes/0",
                        "annotation": "node"
                      },
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                        "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                        "instanceLocation": "#/nodes/0/subtree/nodes/1",
                        "annotation": "node"
                      }
                    ]
                  }
                ]
              },
              {
                "valid": true,
                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/description",
                "absoluteKeywordLocation": "http://localhost:1234/tree#/description",
                "instanceLocation": "#/nodes/0/subtree",
                "annotation": "tree of nodes"
              },
              {
                "valid": true,
                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items",
                "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes/items",
                "instanceLocation": "#/nodes/0/subtree/nodes",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                    "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                    "instanceLocation": "#/nodes/0/subtree/nodes/0",
                    "annotation": "node"
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                    "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                    "instanceLocation": "#/nodes/0/subtree/nodes/1",
                    "annotation": "node"
                  }
                ]
              },
              {
                "valid": true,
                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                "instanceLocation": "#/nodes/0/subtree/nodes/0",
                "annotation": "node"
              },
              {
                "valid": true,
                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                "instanceLocation": "#/nodes/0/subtree/nodes/1",
                "annotation": "node"
              },
              {
                "valid": true,
                "keywordLocation": "#/properties/nodes/items/$ref/description",
                "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                "instanceLocation": "#/nodes/1",
                "annotation": "node"
              },
              {
                "valid": true,
                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref",
                "absoluteKeywordLocation": "http://localhost:1234/tree#",
                "instanceLocation": "#/nodes/1/subtree",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/description",
                    "absoluteKeywordLocation": "http://localhost:1234/tree#/description",
                    "instanceLocation": "#/nodes/1/subtree",
                    "annotation": "tree of nodes"
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items",
                    "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes/items",
                    "instanceLocation": "#/nodes/1/subtree/nodes",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                        "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                        "instanceLocation": "#/nodes/1/subtree/nodes/0",
                        "annotation": "node"
                      },
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                        "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                        "instanceLocation": "#/nodes/1/subtree/nodes/1",
                        "annotation": "node"
                      }
                    ]
                  }
                ]
              },
              {
                "valid": true,
                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/description",
                "absoluteKeywordLocation": "http://localhost:1234/tree#/description",
                "instanceLocation": "#/nodes/1/subtree",
                "annotation": "tree of nodes"
              },
              {
                "valid": true,
                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items",
                "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes/items",
                "instanceLocation": "#/nodes/1/subtree/nodes",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                    "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                    "instanceLocation": "#/nodes/1/subtree/nodes/0",
                    "annotation": "node"
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                    "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                    "instanceLocation": "#/nodes/1/subtree/nodes/1",
                    "annotation": "node"
                  }
                ]
              },
              {
                "valid": true,
                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                "instanceLocation": "#/nodes/1/subtree/nodes/0",
                "annotation": "node"
              },
              {
                "valid": true,
                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                "instanceLocation": "#/nodes/1/subtree/nodes/1",
                "annotation": "node"
              }
            ]
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/description",
                "instanceLocation": "#",
                "annotation": "tree of nodes"
              },
              {
                "valid": true,
                "keywordLocation": "#/properties/nodes/items",
                "instanceLocation": "#/nodes",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/nodes/items/$ref",
                    "absoluteKeywordLocation": "http://localhost:1234/node#",
                    "instanceLocation": "#/nodes/0",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/nodes/items/$ref/description",
                        "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                        "instanceLocation": "#/nodes/0",
                        "annotation": "node"
                      },
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref",
                        "absoluteKeywordLocation": "http://localhost:1234/tree#",
                        "instanceLocation": "#/nodes/0/subtree",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/description",
                            "absoluteKeywordLocation": "http://localhost:1234/tree#/description",
                            "instanceLocation": "#/nodes/0/subtree",
                            "annotation": "tree of nodes"
                          },
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items",
                            "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes/items",
                            "instanceLocation": "#/nodes/0/subtree/nodes",
                            "annotations": [
                              {
                                "valid": true,
                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                                "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                                "instanceLocation": "#/nodes/0/subtree/nodes/0",
                                "annotation": "node"
                              },
                              {
                                "valid": true,
                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                                "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                                "instanceLocation": "#/nodes/0/subtree/nodes/1",
                                "annotation": "node"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/nodes/items/$ref",
                    "absoluteKeywordLocation": "http://localhost:1234/node#",
                    "instanceLocation": "#/nodes/1",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/nodes/items/$ref/description",
                        "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                        "instanceLocation": "#/nodes/1",
                        "annotation": "node"
                      },
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref",
                        "absoluteKeywordLocation": "http://localhost:1234/tree#",
                        "instanceLocation": "#/nodes/1/subtree",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/description",
                            "absoluteKeywordLocation": "http://localhost:1234/tree#/description",
                            "instanceLocation": "#/nodes/1/subtree",
                            "annotation": "tree of nodes"
                          },
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items",
                            "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes/items",
                            "instanceLocation": "#/nodes/1/subtree/nodes",
                            "annotations": [
                              {
                                "valid": true,
                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                                "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                                "instanceLocation": "#/nodes/1/subtree/nodes/0",
                                "annotation": "node"
                              },
                              {
                                "valid": true,
                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                                "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                                "instanceLocation": "#/nodes/1/subtree/nodes/1",
                                "annotation": "node"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/description",
                "instanceLocation": "#",
                "annotation": "tree of nodes"
              },
              {
                "valid": true,
                "keywordLocation": "#/type",
                "instanceLocation": "#"
              },
              {
                "valid": true,
                "keywordLocation": "#/properties",
                "instanceLocation": "#",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/meta",
                    "instanceLocation": "#/meta",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/meta/type",
                        "instanceLocation": "#/meta"
                      }
                    ]
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/nodes",
                    "instanceLocation": "#/nodes",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/nodes/type",
                        "instanceLocation": "#/nodes"
                      },
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/nodes/items",
                        "instanceLocation": "#/nodes",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/nodes/items/$ref",
                            "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes/items/$ref",
                            "instanceLocation": "#/nodes/0",
                            "annotations": [
                              {
                                "valid": true,
                                "keywordLocation": "#/properties/nodes/items/$ref",
                                "absoluteKeywordLocation": "http://localhost:1234/node#",
                                "instanceLocation": "#/nodes/0",
                                "annotations": [
                                  {
                                    "valid": true,
                                    "keywordLocation": "#/properties/nodes/items/$ref/description",
                                    "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                                    "instanceLocation": "#/nodes/0",
                                    "annotation": "node"
                                  },
                                  {
                                    "valid": true,
                                    "keywordLocation": "#/properties/nodes/items/$ref/type",
                                    "absoluteKeywordLocation": "http://localhost:1234/node#/type",
                                    "instanceLocation": "#/nodes/0"
                                  },
                                  {
                                    "valid": true,
                                    "keywordLocation": "#/properties/nodes/items/$ref/properties",
                                    "absoluteKeywordLocation": "http://localhost:1234/node#/properties",
                                    "instanceLocation": "#/nodes/0",
                                    "annotations": [
                                      {
                                        "valid": true,
                                        "keywordLocation": "#/properties/nodes/items/$ref/properties/value",
                                        "absoluteKeywordLocation": "http://localhost:1234/node#/properties/value",
                                        "instanceLocation": "#/nodes/0/value",
                                        "annotations": [
                                          {
                                            "valid": true,
                                            "keywordLocation": "#/properties/nodes/items/$ref/properties/value/type",
                                            "absoluteKeywordLocation": "http://localhost:1234/node#/properties/value/type",
                                            "instanceLocation": "#/nodes/0/value"
                                          }
                                        ]
                                      },
                                      {
                                        "valid": true,
                                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref",
                                        "absoluteKeywordLocation": "http://localhost:1234/node#/properties/subtree/$ref",
                                        "instanceLocation": "#/nodes/0/subtree",
                                        "annotations": [
                                          {
                                            "valid": true,
                                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref",
                                            "absoluteKeywordLocation": "http://localhost:1234/tree#",
                                            "instanceLocation": "#/nodes/0/subtree",
                                            "annotations": [
                                              {
                                                "valid": true,
                                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/description",
                                                "absoluteKeywordLocation": "http://localhost:1234/tree#/description",
                                                "instanceLocation": "#/nodes/0/subtree",
                                                "annotation": "tree of nodes"
                                              },
                                              {
                                                "valid": true,
                                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/type",
                                                "absoluteKeywordLocation": "http://localhost:1234/tree#/type",
                                                "instanceLocation": "#/nodes/0/subtree"
                                              },
                                              {
                                                "valid": true,
                                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties",
                                                "absoluteKeywordLocation": "http://localhost:1234/tree#/properties",
                                                "instanceLocation": "#/nodes/0/subtree",
                                                "annotations": [
                                                  {
                                                    "valid": true,
                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/meta",
                                                    "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/meta",
                                                    "instanceLocation": "#/nodes/0/subtree/meta",
                                                    "annotations": [
                                                      {
                                                        "valid": true,
                                                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/meta/type",
                                                        "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/meta/type",
                                                        "instanceLocation": "#/nodes/0/subtree/meta"
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "valid": true,
                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes",
                                                    "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes",
                                                    "instanceLocation": "#/nodes/0/subtree/nodes",
                                                    "annotations": [
                                                      {
                                                        "valid": true,
                                                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/type",
                                                        "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes/type",
                                                        "instanceLocation": "#/nodes/0/subtree/nodes"
                                                      },
                                                      {
                                                        "valid": true,
                                                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items",
                                                        "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes/items",
                                                        "instanceLocation": "#/nodes/0/subtree/nodes",
                                                        "annotations": [
                                                          {
                                                            "valid": true,
                                                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref",
                                                            "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes/items/$ref",
                                                            "instanceLocation": "#/nodes/0/subtree/nodes/0",
                                                            "annotations": [
                                                              {
                                                                "valid": true,
                                                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref",
                                                                "absoluteKeywordLocation": "http://localhost:1234/node#",
                                                                "instanceLocation": "#/nodes/0/subtree/nodes/0",
                                                                "annotations": [
                                                                  {
                                                                    "valid": true,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                                                                    "instanceLocation": "#/nodes/0/subtree/nodes/0",
                                                                    "annotation": "node"
                                                                  },
                                                                  {
                                                                    "valid": true,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/type",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/type",
                                                                    "instanceLocation": "#/nodes/0/subtree/nodes/0"
                                                                  },
                                                                  {
                                                                    "valid": true,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/properties",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/properties",
                                                                    "instanceLocation": "#/nodes/0/subtree/nodes/0",
                                                                    "annotations": [
                                                                      {
                                                                        "valid": true,
                                                                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/properties/value",
                                                                        "absoluteKeywordLocation": "http://localhost:1234/node#/properties/value",
                                                                        "instanceLocation": "#/nodes/0/subtree/nodes/0/value",
                                                                        "annotations": [
                                                                          {
                                                                            "valid": true,
                                                                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/properties/value/type",
                                                                            "absoluteKeywordLocation": "http://localhost:1234/node#/properties/value/type",
                                                                            "instanceLocation": "#/nodes/0/subtree/nodes/0/value"
                                                                          }
                                                                        ]
                                                                      }
                                                                    ]
                                                                  },
                                                                  {
                                                                    "valid": true,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/required",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/required",
                                                                    "instanceLocation": "#/nodes/0/subtree/nodes/0"
                                                                  }
                                                                ]
                                                              }
                                                            ]
                                                          },
                                                          {
                                                            "valid": true,
                                                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref",
                                                            "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes/items/$ref",
                                                            "instanceLocation": "#/nodes/0/subtree/nodes/1",
                                                            "annotations": [
                                                              {
                                                                "valid": true,
                                                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref",
                                                                "absoluteKeywordLocation": "http://localhost:1234/node#",
                                                                "instanceLocation": "#/nodes/0/subtree/nodes/1",
                                                                "annotations": [
                                                                  {
                                                                    "valid": true,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                                                                    "instanceLocation": "#/nodes/0/subtree/nodes/1",
                                                                    "annotation": "node"
                                                                  },
                                                                  {
                                                                    "valid": true,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/type",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/type",
                                                                    "instanceLocation": "#/nodes/0/subtree/nodes/1"
                                                                  },
                                                                  {
                                                                    "valid": true,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/properties",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/properties",
                                                                    "instanceLocation": "#/nodes/0/subtree/nodes/1",
                                                                    "annotations": [
                                                                      {
                                                                        "valid": true,
                                                                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/properties/value",
                                                                        "absoluteKeywordLocation": "http://localhost:1234/node#/properties/value",
                                                                        "instanceLocation": "#/nodes/0/subtree/nodes/1/value",
                                                                        "annotations": [
                                                                          {
                                                                            "valid": true,
                                                                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/properties/value/type",
                                                                            "absoluteKeywordLocation": "http://localhost:1234/node#/properties/value/type",
                                                                            "instanceLocation": "#/nodes/0/subtree/nodes/1/value"
                                                                          }
                                                                        ]
                                                                      }
                                                                    ]
                                                                  },
                                                                  {
                                                                    "valid": true,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/required",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/required",
                                                                    "instanceLocation": "#/nodes/0/subtree/nodes/1"
                                                                  }
                                                                ]
                                                              }
                                                            ]
                                                          }
                                                        ]
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              {
                                                "valid": true,
                                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/required",
                                                "absoluteKeywordLocation": "http://localhost:1234/tree#/required",
                                                "instanceLocation": "#/nodes/0/subtree"
                                              },
                                              {
                                                "valid": true,
                                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/$defs",
                                                "absoluteKeywordLocation": "http://localhost:1234/tree#/$defs",
                                                "instanceLocation": "#/nodes/0/subtree"
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "valid": true,
                                    "keywordLocation": "#/properties/nodes/items/$ref/required",
                                    "absoluteKeywordLocation": "http://localhost:1234/node#/required",
                                    "instanceLocation": "#/nodes/0"
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/nodes/items/$ref",
                            "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes/items/$ref",
                            "instanceLocation": "#/nodes/1",
                            "annotations": [
                              {
                                "valid": true,
                                "keywordLocation": "#/properties/nodes/items/$ref",
                                "absoluteKeywordLocation": "http://localhost:1234/node#",
                                "instanceLocation": "#/nodes/1",
                                "annotations": [
                                  {
                                    "valid": true,
                                    "keywordLocation": "#/properties/nodes/items/$ref/description",
                                    "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                                    "instanceLocation": "#/nodes/1",
                                    "annotation": "node"
                                  },
                                  {
                                    "valid": true,
                                    "keywordLocation": "#/properties/nodes/items/$ref/type",
                                    "absoluteKeywordLocation": "http://localhost:1234/node#/type",
                                    "instanceLocation": "#/nodes/1"
                                  },
                                  {
                                    "valid": true,
                                    "keywordLocation": "#/properties/nodes/items/$ref/properties",
                                    "absoluteKeywordLocation": "http://localhost:1234/node#/properties",
                                    "instanceLocation": "#/nodes/1",
                                    "annotations": [
                                      {
                                        "valid": true,
                                        "keywordLocation": "#/properties/nodes/items/$ref/properties/value",
                                        "absoluteKeywordLocation": "http://localhost:1234/node#/properties/value",
                                        "instanceLocation": "#/nodes/1/value",
                                        "annotations": [
                                          {
                                            "valid": true,
                                            "keywordLocation": "#/properties/nodes/items/$ref/properties/value/type",
                                            "absoluteKeywordLocation": "http://localhost:1234/node#/properties/value/type",
                                            "instanceLocation": "#/nodes/1/value"
                                          }
                                        ]
                                      },
                                      {
                                        "valid": true,
                                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref",
                                        "absoluteKeywordLocation": "http://localhost:1234/node#/properties/subtree/$ref",
                                        "instanceLocation": "#/nodes/1/subtree",
                                        "annotations": [
                                          {
                                            "valid": true,
                                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref",
                                            "absoluteKeywordLocation": "http://localhost:1234/tree#",
                                            "instanceLocation": "#/nodes/1/subtree",
                                            "annotations": [
                                              {
                                                "valid": true,
                                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/description",
                                                "absoluteKeywordLocation": "http://localhost:1234/tree#/description",
                                                "instanceLocation": "#/nodes/1/subtree",
                                                "annotation": "tree of nodes"
                                              },
                                              {
                                                "valid": true,
                                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/type",
                                                "absoluteKeywordLocation": "http://localhost:1234/tree#/type",
                                                "instanceLocation": "#/nodes/1/subtree"
                                              },
                                              {
                                                "valid": true,
                                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties",
                                                "absoluteKeywordLocation": "http://localhost:1234/tree#/properties",
                                                "instanceLocation": "#/nodes/1/subtree",
                                                "annotations": [
                                                  {
                                                    "valid": true,
                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/meta",
                                                    "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/meta",
                                                    "instanceLocation": "#/nodes/1/subtree/meta",
                                                    "annotations": [
                                                      {
                                                        "valid": true,
                                                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/meta/type",
                                                        "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/meta/type",
                                                        "instanceLocation": "#/nodes/1/subtree/meta"
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "valid": true,
                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes",
                                                    "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes",
                                                    "instanceLocation": "#/nodes/1/subtree/nodes",
                                                    "annotations": [
                                                      {
                                                        "valid": true,
                                                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/type",
                                                        "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes/type",
                                                        "instanceLocation": "#/nodes/1/subtree/nodes"
                                                      },
                                                      {
                                                        "valid": true,
                                                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items",
                                                        "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes/items",
                                                        "instanceLocation": "#/nodes/1/subtree/nodes",
                                                        "annotations": [
                                                          {
                                                            "valid": true,
                                                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref",
                                                            "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes/items/$ref",
                                                            "instanceLocation": "#/nodes/1/subtree/nodes/0",
                                                            "annotations": [
                                                              {
                                                                "valid": true,
                                                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref",
                                                                "absoluteKeywordLocation": "http://localhost:1234/node#",
                                                                "instanceLocation": "#/nodes/1/subtree/nodes/0",
                                                                "annotations": [
                                                                  {
                                                                    "valid": true,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                                                                    "instanceLocation": "#/nodes/1/subtree/nodes/0",
                                                                    "annotation": "node"
                                                                  },
                                                                  {
                                                                    "valid": true,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/type",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/type",
                                                                    "instanceLocation": "#/nodes/1/subtree/nodes/0"
                                                                  },
                                                                  {
                                                                    "valid": true,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/properties",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/properties",
                                                                    "instanceLocation": "#/nodes/1/subtree/nodes/0",
                                                                    "annotations": [
                                                                      {
                                                                        "valid": true,
                                                                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/properties/value",
                                                                        "absoluteKeywordLocation": "http://localhost:1234/node#/properties/value",
                                                                        "instanceLocation": "#/nodes/1/subtree/nodes/0/value",
                                                                        "annotations": [
                                                                          {
                                                                            "valid": true,
                                                                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/properties/value/type",
                                                                            "absoluteKeywordLocation": "http://localhost:1234/node#/properties/value/type",
                                                                            "instanceLocation": "#/nodes/1/subtree/nodes/0/value"
                                                                          }
                                                                        ]
                                                                      }
                                                                    ]
                                                                  },
                                                                  {
                                                                    "valid": true,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/required",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/required",
                                                                    "instanceLocation": "#/nodes/1/subtree/nodes/0"
                                                                  }
                                                                ]
                                                              }
                                                            ]
                                                          },
                                                          {
                                                            "valid": true,
                                                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref",
                                                            "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes/items/$ref",
                                                            "instanceLocation": "#/nodes/1/subtree/nodes/1",
                                                            "annotations": [
                                                              {
                                                                "valid": true,
                                                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref",
                                                                "absoluteKeywordLocation": "http://localhost:1234/node#",
                                                                "instanceLocation": "#/nodes/1/subtree/nodes/1",
                                                                "annotations": [
                                                                  {
                                                                    "valid": true,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                                                                    "instanceLocation": "#/nodes/1/subtree/nodes/1",
                                                                    "annotation": "node"
                                                                  },
                                                                  {
                                                                    "valid": true,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/type",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/type",
                                                                    "instanceLocation": "#/nodes/1/subtree/nodes/1"
                                                                  },
                                                                  {
                                                                    "valid": true,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/properties",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/properties",
                                                                    "instanceLocation": "#/nodes/1/subtree/nodes/1",
                                                                    "annotations": [
                                                                      {
                                                                        "valid": true,
                                                                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/properties/value",
                                                                        "absoluteKeywordLocation": "http://localhost:1234/node#/properties/value",
                                                                        "instanceLocation": "#/nodes/1/subtree/nodes/1/value",
                                                                        "annotations": [
                                                                          {
                                                                            "valid": true,
                                                                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/properties/value/type",
                                                                            "absoluteKeywordLocation": "http://localhost:1234/node#/properties/value/type",
                                                                            "instanceLocation": "#/nodes/1/subtree/nodes/1/value"
                                                                          }
                                                                        ]
                                                                      }
                                                                    ]
                                                                  },
                                                                  {
                                                                    "valid": true,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/required",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/required",
                                                                    "instanceLocation": "#/nodes/1/subtree/nodes/1"
                                                                  }
                                                                ]
                                                              }
                                                            ]
                                                          }
                                                        ]
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              {
                                                "valid": true,
                                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/required",
                                                "absoluteKeywordLocation": "http://localhost:1234/tree#/required",
                                                "instanceLocation": "#/nodes/1/subtree"
                                              },
                                              {
                                                "valid": true,
                                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/$defs",
                                                "absoluteKeywordLocation": "http://localhost:1234/tree#/$defs",
                                                "instanceLocation": "#/nodes/1/subtree"
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "valid": true,
                                    "keywordLocation": "#/properties/nodes/items/$ref/required",
                                    "absoluteKeywordLocation": "http://localhost:1234/node#/required",
                                    "instanceLocation": "#/nodes/1"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "valid": true,
                "keywordLocation": "#/required",
                "instanceLocation": "#"
              },
              {
                "valid": true,
                "keywordLocation": "#/$defs",
                "instanceLocation": "#"
              }
            ]
          }
        }
      },
      {
        "description": "invalid tree",
        "data": {
          "meta": "root",
          "nodes": [
            {
              "value": 1,
              "subtree": {
                "meta": "child",
                "nodes": [{"value": "string is invalid"}, {"value": 1.2}]
              }
            },
            {
              "value": 2,
              "subtree": {
                "meta": "child",
                "nodes": [{"value": 2.1}, {"value": 2.2}]
              }
            }
          ]
        },
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/properties/value/type",
            "absoluteKeywordLocation": "http://localhost:1234/node#/properties/value/type",
            "instanceLocation": "#/nodes/0/subtree/nodes/0/value"
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/properties/value/type",
            "absoluteKeywordLocation": "http://localhost:1234/node#/properties/value/type",
            "instanceLocation": "#/nodes/0/subtree/nodes/0/value"
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": true,
                "keywordLocation": "#/description",
                "instanceLocation": "#",
                "annotation": "tree of nodes"
              },
              {
                "valid": true,
                "keywordLocation": "#/type",
                "instanceLocation": "#"
              },
              {
                "valid": false,
                "keywordLocation": "#/properties",
                "instanceLocation": "#",
                "errors": [
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/meta",
                    "instanceLocation": "#/meta",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/meta/type",
                        "instanceLocation": "#/meta"
                      }
                    ]
                  },
                  {
                    "valid": false,
                    "keywordLocation": "#/properties/nodes",
                    "instanceLocation": "#/nodes",
                    "errors": [
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/nodes/type",
                        "instanceLocation": "#/nodes"
                      },
                      {
                        "valid": false,
                        "keywordLocation": "#/properties/nodes/items",
                        "instanceLocation": "#/nodes",
                        "errors": [
                          {
                            "valid": false,
                            "keywordLocation": "#/properties/nodes/items/$ref",
                            "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes/items/$ref",
                            "instanceLocation": "#/nodes/0",
                            "errors": [
                              {
                                "valid": false,
                                "keywordLocation": "#/properties/nodes/items/$ref",
                                "absoluteKeywordLocation": "http://localhost:1234/node#",
                                "instanceLocation": "#/nodes/0",
                                "errors": [
                                  {
                                    "valid": true,
                                    "keywordLocation": "#/properties/nodes/items/$ref/description",
                                    "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                                    "instanceLocation": "#/nodes/0",
                                    "annotation": "node"
                                  },
                                  {
                                    "valid": true,
                                    "keywordLocation": "#/properties/nodes/items/$ref/type",
                                    "absoluteKeywordLocation": "http://localhost:1234/node#/type",
                                    "instanceLocation": "#/nodes/0"
                                  },
                                  {
                                    "valid": false,
                                    "keywordLocation": "#/properties/nodes/items/$ref/properties",
                                    "absoluteKeywordLocation": "http://localhost:1234/node#/properties",
                                    "instanceLocation": "#/nodes/0",
                                    "errors": [
                                      {
                                        "valid": true,
                                        "keywordLocation": "#/properties/nodes/items/$ref/properties/value",
                                        "absoluteKeywordLocation": "http://localhost:1234/node#/properties/value",
                                        "instanceLocation": "#/nodes/0/value",
                                        "annotations": [
                                          {
                                            "valid": true,
                                            "keywordLocation": "#/properties/nodes/items/$ref/properties/value/type",
                                            "absoluteKeywordLocation": "http://localhost:1234/node#/properties/value/type",
                                            "instanceLocation": "#/nodes/0/value"
                                          }
                                        ]
                                      },
                                      {
                                        "valid": false,
                                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref",
                                        "absoluteKeywordLocation": "http://localhost:1234/node#/properties/subtree/$ref",
                                        "instanceLocation": "#/nodes/0/subtree",
                                        "errors": [
                                          {
                                            "valid": false,
                                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref",
                                            "absoluteKeywordLocation": "http://localhost:1234/tree#",
                                            "instanceLocation": "#/nodes/0/subtree",
                                            "errors": [
                                              {
                                                "valid": true,
                                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/description",
                                                "absoluteKeywordLocation": "http://localhost:1234/tree#/description",
                                                "instanceLocation": "#/nodes/0/subtree",
                                                "annotation": "tree of nodes"
                                              },
                                              {
                                                "valid": true,
                                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/type",
                                                "absoluteKeywordLocation": "http://localhost:1234/tree#/type",
                                                "instanceLocation": "#/nodes/0/subtree"
                                              },
                                              {
                                                "valid": false,
                                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties",
                                                "absoluteKeywordLocation": "http://localhost:1234/tree#/properties",
                                                "instanceLocation": "#/nodes/0/subtree",
                                                "errors": [
                                                  {
                                                    "valid": true,
                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/meta",
                                                    "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/meta",
                                                    "instanceLocation": "#/nodes/0/subtree/meta",
                                                    "annotations": [
                                                      {
                                                        "valid": true,
                                                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/meta/type",
                                                        "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/meta/type",
                                                        "instanceLocation": "#/nodes/0/subtree/meta"
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "valid": false,
                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes",
                                                    "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes",
                                                    "instanceLocation": "#/nodes/0/subtree/nodes",
                                                    "errors": [
                                                      {
                                                        "valid": true,
                                                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/type",
                                                        "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes/type",
                                                        "instanceLocation": "#/nodes/0/subtree/nodes"
                                                      },
                                                      {
                                                        "valid": false,
                                                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items",
                                                        "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes/items",
                                                        "instanceLocation": "#/nodes/0/subtree/nodes",
                                                        "errors": [
                                                          {
                                                            "valid": false,
                                                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref",
                                                            "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes/items/$ref",
                                                            "instanceLocation": "#/nodes/0/subtree/nodes/0",
                                                            "errors": [
                                                              {
                                                                "valid": false,
                                                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref",
                                                                "absoluteKeywordLocation": "http://localhost:1234/node#",
                                                                "instanceLocation": "#/nodes/0/subtree/nodes/0",
                                                                "errors": [
                                                                  {
                                                                    "valid": true,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                                                                    "instanceLocation": "#/nodes/0/subtree/nodes/0",
                                                                    "annotation": "node"
                                                                  },
                                                                  {
                                                                    "valid": true,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/type",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/type",
                                                                    "instanceLocation": "#/nodes/0/subtree/nodes/0"
                                                                  },
                                                                  {
                                                                    "valid": false,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/properties",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/properties",
                                                                    "instanceLocation": "#/nodes/0/subtree/nodes/0",
                                                                    "errors": [
                                                                      {
                                                                        "valid": false,
                                                                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/properties/value",
                                                                        "absoluteKeywordLocation": "http://localhost:1234/node#/properties/value",
                                                                        "instanceLocation": "#/nodes/0/subtree/nodes/0/value",
                                                                        "errors": [
                                                                          {
                                                                            "valid": false,
                                                                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/properties/value/type",
                                                                            "absoluteKeywordLocation": "http://localhost:1234/node#/properties/value/type",
                                                                            "instanceLocation": "#/nodes/0/subtree/nodes/0/value"
                                                                          }
                                                                        ]
                                                                      }
                                                                    ]
                                                                  },
                                                                  {
                                                                    "valid": true,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/required",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/required",
                                                                    "instanceLocation": "#/nodes/0/subtree/nodes/0"
                                                                  }
                                                                ]
                                                              }
                                                            ]
                                                          },
                                                          {
                                                            "valid": true,
                                                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref",
                                                            "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes/items/$ref",
                                                            "instanceLocation": "#/nodes/0/subtree/nodes/1",
                                                            "annotations": [
                                                              {
                                                                "valid": true,
                                                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref",
                                                                "absoluteKeywordLocation": "http://localhost:1234/node#",
                                                                "instanceLocation": "#/nodes/0/subtree/nodes/1",
                                                                "annotations": [
                                                                  {
                                                                    "valid": true,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                                                                    "instanceLocation": "#/nodes/0/subtree/nodes/1",
                                                                    "annotation": "node"
                                                                  },
                                                                  {
                                                                    "valid": true,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/type",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/type",
                                                                    "instanceLocation": "#/nodes/0/subtree/nodes/1"
                                                                  },
                                                                  {
                                                                    "valid": true,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/properties",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/properties",
                                                                    "instanceLocation": "#/nodes/0/subtree/nodes/1",
                                                                    "annotations": [
                                                                      {
                                                                        "valid": true,
                                                                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/properties/value",
                                                                        "absoluteKeywordLocation": "http://localhost:1234/node#/properties/value",
                                                                        "instanceLocation": "#/nodes/0/subtree/nodes/1/value",
                                                                        "annotations": [
                                                                          {
                                                                            "valid": true,
                                                                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/properties/value/type",
                                                                            "absoluteKeywordLocation": "http://localhost:1234/node#/properties/value/type",
                                                                            "instanceLocation": "#/nodes/0/subtree/nodes/1/value"
                                                                          }
                                                                        ]
                                                                      }
                                                                    ]
                                                                  },
                                                                  {
                                                                    "valid": true,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/required",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/required",
                                                                    "instanceLocation": "#/nodes/0/subtree/nodes/1"
                                                                  }
                                                                ]
                                                              }
                                                            ]
                                                          }
                                                        ]
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              {
                                                "valid": true,
                                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/required",
                                                "absoluteKeywordLocation": "http://localhost:1234/tree#/required",
                                                "instanceLocation": "#/nodes/0/subtree"
                                              },
                                              {
                                                "valid": true,
                                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/$defs",
                                                "absoluteKeywordLocation": "http://localhost:1234/tree#/$defs",
                                                "instanceLocation": "#/nodes/0/subtree"
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "valid": true,
                                    "keywordLocation": "#/properties/nodes/items/$ref/required",
                                    "absoluteKeywordLocation": "http://localhost:1234/node#/required",
                                    "instanceLocation": "#/nodes/0"
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/nodes/items/$ref",
                            "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes/items/$ref",
                            "instanceLocation": "#/nodes/1",
                            "annotations": [
                              {
                                "valid": true,
                                "keywordLocation": "#/properties/nodes/items/$ref",
                                "absoluteKeywordLocation": "http://localhost:1234/node#",
                                "instanceLocation": "#/nodes/1",
                                "annotations": [
                                  {
                                    "valid": true,
                                    "keywordLocation": "#/properties/nodes/items/$ref/description",
                                    "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                                    "instanceLocation": "#/nodes/1",
                                    "annotation": "node"
                                  },
                                  {
                                    "valid": true,
                                    "keywordLocation": "#/properties/nodes/items/$ref/type",
                                    "absoluteKeywordLocation": "http://localhost:1234/node#/type",
                                    "instanceLocation": "#/nodes/1"
                                  },
                                  {
                                    "valid": true,
                                    "keywordLocation": "#/properties/nodes/items/$ref/properties",
                                    "absoluteKeywordLocation": "http://localhost:1234/node#/properties",
                                    "instanceLocation": "#/nodes/1",
                                    "annotations": [
                                      {
                                        "valid": true,
                                        "keywordLocation": "#/properties/nodes/items/$ref/properties/value",
                                        "absoluteKeywordLocation": "http://localhost:1234/node#/properties/value",
                                        "instanceLocation": "#/nodes/1/value",
                                        "annotations": [
                                          {
                                            "valid": true,
                                            "keywordLocation": "#/properties/nodes/items/$ref/properties/value/type",
                                            "absoluteKeywordLocation": "http://localhost:1234/node#/properties/value/type",
                                            "instanceLocation": "#/nodes/1/value"
                                          }
                                        ]
                                      },
                                      {
                                        "valid": true,
                                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref",
                                        "absoluteKeywordLocation": "http://localhost:1234/node#/properties/subtree/$ref",
                                        "instanceLocation": "#/nodes/1/subtree",
                                        "annotations": [
                                          {
                                            "valid": true,
                                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref",
                                            "absoluteKeywordLocation": "http://localhost:1234/tree#",
                                            "instanceLocation": "#/nodes/1/subtree",
                                            "annotations": [
                                              {
                                                "valid": true,
                                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/description",
                                                "absoluteKeywordLocation": "http://localhost:1234/tree#/description",
                                                "instanceLocation": "#/nodes/1/subtree",
                                                "annotation": "tree of nodes"
                                              },
                                              {
                                                "valid": true,
                                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/type",
                                                "absoluteKeywordLocation": "http://localhost:1234/tree#/type",
                                                "instanceLocation": "#/nodes/1/subtree"
                                              },
                                              {
                                                "valid": true,
                                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties",
                                                "absoluteKeywordLocation": "http://localhost:1234/tree#/properties",
                                                "instanceLocation": "#/nodes/1/subtree",
                                                "annotations": [
                                                  {
                                                    "valid": true,
                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/meta",
                                                    "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/meta",
                                                    "instanceLocation": "#/nodes/1/subtree/meta",
                                                    "annotations": [
                                                      {
                                                        "valid": true,
                                                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/meta/type",
                                                        "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/meta/type",
                                                        "instanceLocation": "#/nodes/1/subtree/meta"
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "valid": true,
                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes",
                                                    "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes",
                                                    "instanceLocation": "#/nodes/1/subtree/nodes",
                                                    "annotations": [
                                                      {
                                                        "valid": true,
                                                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/type",
                                                        "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes/type",
                                                        "instanceLocation": "#/nodes/1/subtree/nodes"
                                                      },
                                                      {
                                                        "valid": true,
                                                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items",
                                                        "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes/items",
                                                        "instanceLocation": "#/nodes/1/subtree/nodes",
                                                        "annotations": [
                                                          {
                                                            "valid": true,
                                                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref",
                                                            "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes/items/$ref",
                                                            "instanceLocation": "#/nodes/1/subtree/nodes/0",
                                                            "annotations": [
                                                              {
                                                                "valid": true,
                                                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref",
                                                                "absoluteKeywordLocation": "http://localhost:1234/node#",
                                                                "instanceLocation": "#/nodes/1/subtree/nodes/0",
                                                                "annotations": [
                                                                  {
                                                                    "valid": true,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                                                                    "instanceLocation": "#/nodes/1/subtree/nodes/0",
                                                                    "annotation": "node"
                                                                  },
                                                                  {
                                                                    "valid": true,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/type",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/type",
                                                                    "instanceLocation": "#/nodes/1/subtree/nodes/0"
                                                                  },
                                                                  {
                                                                    "valid": true,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/properties",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/properties",
                                                                    "instanceLocation": "#/nodes/1/subtree/nodes/0",
                                                                    "annotations": [
                                                                      {
                                                                        "valid": true,
                                                                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/properties/value",
                                                                        "absoluteKeywordLocation": "http://localhost:1234/node#/properties/value",
                                                                        "instanceLocation": "#/nodes/1/subtree/nodes/0/value",
                                                                        "annotations": [
                                                                          {
                                                                            "valid": true,
                                                                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/properties/value/type",
                                                                            "absoluteKeywordLocation": "http://localhost:1234/node#/properties/value/type",
                                                                            "instanceLocation": "#/nodes/1/subtree/nodes/0/value"
                                                                          }
                                                                        ]
                                                                      }
                                                                    ]
                                                                  },
                                                                  {
                                                                    "valid": true,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/required",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/required",
                                                                    "instanceLocation": "#/nodes/1/subtree/nodes/0"
                                                                  }
                                                                ]
                                                              }
                                                            ]
                                                          },
                                                          {
                                                            "valid": true,
                                                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref",
                                                            "absoluteKeywordLocation": "http://localhost:1234/tree#/properties/nodes/items/$ref",
                                                            "instanceLocation": "#/nodes/1/subtree/nodes/1",
                                                            "annotations": [
                                                              {
                                                                "valid": true,
                                                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref",
                                                                "absoluteKeywordLocation": "http://localhost:1234/node#",
                                                                "instanceLocation": "#/nodes/1/subtree/nodes/1",
                                                                "annotations": [
                                                                  {
                                                                    "valid": true,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/description",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/description",
                                                                    "instanceLocation": "#/nodes/1/subtree/nodes/1",
                                                                    "annotation": "node"
                                                                  },
                                                                  {
                                                                    "valid": true,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/type",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/type",
                                                                    "instanceLocation": "#/nodes/1/subtree/nodes/1"
                                                                  },
                                                                  {
                                                                    "valid": true,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/properties",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/properties",
                                                                    "instanceLocation": "#/nodes/1/subtree/nodes/1",
                                                                    "annotations": [
                                                                      {
                                                                        "valid": true,
                                                                        "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/properties/value",
                                                                        "absoluteKeywordLocation": "http://localhost:1234/node#/properties/value",
                                                                        "instanceLocation": "#/nodes/1/subtree/nodes/1/value",
                                                                        "annotations": [
                                                                          {
                                                                            "valid": true,
                                                                            "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/properties/value/type",
                                                                            "absoluteKeywordLocation": "http://localhost:1234/node#/properties/value/type",
                                                                            "instanceLocation": "#/nodes/1/subtree/nodes/1/value"
                                                                          }
                                                                        ]
                                                                      }
                                                                    ]
                                                                  },
                                                                  {
                                                                    "valid": true,
                                                                    "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/properties/nodes/items/$ref/required",
                                                                    "absoluteKeywordLocation": "http://localhost:1234/node#/required",
                                                                    "instanceLocation": "#/nodes/1/subtree/nodes/1"
                                                                  }
                                                                ]
                                                              }
                                                            ]
                                                          }
                                                        ]
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              {
                                                "valid": true,
                                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/required",
                                                "absoluteKeywordLocation": "http://localhost:1234/tree#/required",
                                                "instanceLocation": "#/nodes/1/subtree"
                                              },
                                              {
                                                "valid": true,
                                                "keywordLocation": "#/properties/nodes/items/$ref/properties/subtree/$ref/$defs",
                                                "absoluteKeywordLocation": "http://localhost:1234/tree#/$defs",
                                                "instanceLocation": "#/nodes/1/subtree"
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "valid": true,
                                    "keywordLocation": "#/properties/nodes/items/$ref/required",
                                    "absoluteKeywordLocation": "http://localhost:1234/node#/required",
                                    "instanceLocation": "#/nodes/1"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "valid": true,
                "keywordLocation": "#/required",
                "instanceLocation": "#"
              },
              {
                "valid": true,
                "keywordLocation": "#/$defs",
                "instanceLocation": "#"
              }
            ]
          }
        }
      }
    ]
  },
  {
    "description": "refs with quote",
    "schema": {
      "properties": {"foo\"bar": {"$ref": "#/$defs/foo%22bar"}},
      "$defs": {"foo\"bar": {"type": "number"}}
    },
    "tests": [
      {
        "description": "object with numbers is valid",
        "data": {"foo\"bar": 1},
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/properties",
                "instanceLocation": "#",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/properties/foo\"bar/$ref",
                    "instanceLocation": "#/foo\"bar",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/properties/foo\"bar/$ref",
                        "instanceLocation": "#/foo\"bar",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/properties/foo\"bar/$ref/type",
                            "instanceLocation": "#/foo\"bar"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "valid": true,
                "keywordLocation": "#/$defs",
                "instanceLocation": "#"
              }
            ]
          }
        }
      },
      {
        "description": "object with strings is invalid",
        "data": {"foo\"bar": "1"},
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "keywordLocation": "#/properties/foo\"bar/$ref/type",
            "instanceLocation": "#/foo\"bar"
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/properties/foo\"bar/$ref/type",
            "instanceLocation": "#/foo\"bar"
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/properties",
                "instanceLocation": "#",
                "errors": [
                  {
                    "valid": false,
                    "keywordLocation": "#/properties/foo\"bar/$ref",
                    "instanceLocation": "#/foo\"bar",
                    "errors": [
                      {
                        "valid": false,
                        "keywordLocation": "#/properties/foo\"bar/$ref",
                        "instanceLocation": "#/foo\"bar",
                        "errors": [
                          {
                            "valid": false,
                            "keywordLocation": "#/properties/foo\"bar/$ref/type",
                            "instanceLocation": "#/foo\"bar"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "valid": true,
                "keywordLocation": "#/$defs",
                "instanceLocation": "#"
              }
            ]
          }
        }
      }
    ]
  },
  {
    "description": "Location-independent identifier",
    "schema": {
      "allOf": [{"$ref": "#foo"}],
      "$defs": {"A": {"$id": "#foo", "type": "integer"}}
    },
    "tests": [
      {
        "description": "match",
        "data": 1,
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/allOf",
                "instanceLocation": "#",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/allOf/0/$ref",
                    "instanceLocation": "#",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/allOf/0/$ref",
                        "instanceLocation": "#",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/allOf/0/$ref/type",
                            "instanceLocation": "#"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "valid": true,
                "keywordLocation": "#/$defs",
                "instanceLocation": "#"
              }
            ]
          }
        }
      },
      {
        "description": "mismatch",
        "data": "a",
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "keywordLocation": "#/allOf/0/$ref/type",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/allOf/0/$ref/type",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/allOf",
                "instanceLocation": "#",
                "errors": [
                  {
                    "valid": false,
                    "keywordLocation": "#/allOf/0/$ref",
                    "instanceLocation": "#",
                    "errors": [
                      {
                        "valid": false,
                        "keywordLocation": "#/allOf/0/$ref",
                        "instanceLocation": "#",
                        "errors": [
                          {
                            "valid": false,
                            "keywordLocation": "#/allOf/0/$ref/type",
                            "instanceLocation": "#"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "valid": true,
                "keywordLocation": "#/$defs",
                "instanceLocation": "#"
              }
            ]
          }
        }
      }
    ]
  },
  {
    "description": "Location-independent identifier with absolute URI",
    "schema": {
      "allOf": [{"$ref": "http://localhost:1234/bar#foo"}],
      "$defs": {
        "A": {"$id": "http://localhost:1234/bar#foo", "type": "integer"}
      }
    },
    "tests": [
      {
        "description": "match",
        "data": 1,
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/allOf",
                "instanceLocation": "#",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/allOf/0/$ref",
                    "instanceLocation": "#",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/allOf/0/$ref",
                        "instanceLocation": "#",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/allOf/0/$ref/type",
                            "instanceLocation": "#"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "valid": true,
                "keywordLocation": "#/$defs",
                "instanceLocation": "#"
              }
            ]
          }
        }
      },
      {
        "description": "mismatch",
        "data": "a",
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "keywordLocation": "#/allOf/0/$ref/type",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/allOf/0/$ref/type",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/allOf",
                "instanceLocation": "#",
                "errors": [
                  {
                    "valid": false,
                    "keywordLocation": "#/allOf/0/$ref",
                    "instanceLocation": "#",
                    "errors": [
                      {
                        "valid": false,
                        "keywordLocation": "#/allOf/0/$ref",
                        "instanceLocation": "#",
                        "errors": [
                          {
                            "valid": false,
                            "keywordLocation": "#/allOf/0/$ref/type",
                            "instanceLocation": "#"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "valid": true,
                "keywordLocation": "#/$defs",
                "instanceLocation": "#"
              }
            ]
          }
        }
      }
    ]
  },
  {
    "description": "Location-independent identifier with base URI change in subschema",
    "schema": {
      "$id": "http://localhost:1234/root",
      "allOf": [{"$ref": "http://localhost:1234/nested.json#foo"}],
      "$defs": {
        "A": {
          "$id": "nested.json",
          "$defs": {"B": {"$id": "#foo", "type": "integer"}}
        }
      }
    },
    "tests": [
      {
        "description": "match",
        "data": 1,
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/allOf",
                "instanceLocation": "#",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/allOf/0/$ref",
                    "absoluteKeywordLocation": "http://localhost:1234/root#/allOf/0/$ref",
                    "instanceLocation": "#",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/allOf/0/$ref",
                        "absoluteKeywordLocation": "http://localhost:1234/nested.json#foo#/foo",
                        "instanceLocation": "#",
                        "annotations": [
                          {
                            "valid": true,
                            "keywordLocation": "#/allOf/0/$ref/type",
                            "absoluteKeywordLocation": "http://localhost:1234/nested.json#foo#/foo/type",
                            "instanceLocation": "#"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "valid": true,
                "keywordLocation": "#/$defs",
                "instanceLocation": "#"
              }
            ]
          }
        }
      },
      {
        "description": "mismatch",
        "data": "a",
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "keywordLocation": "#/allOf/0/$ref/type",
            "absoluteKeywordLocation": "http://localhost:1234/nested.json#foo#/foo/type",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/allOf/0/$ref/type",
            "absoluteKeywordLocation": "http://localhost:1234/nested.json#foo#/foo/type",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/allOf",
                "instanceLocation": "#",
                "errors": [
                  {
                    "valid": false,
                    "keywordLocation": "#/allOf/0/$ref",
                    "absoluteKeywordLocation": "http://localhost:1234/root#/allOf/0/$ref",
                    "instanceLocation": "#",
                    "errors": [
                      {
                        "valid": false,
                        "keywordLocation": "#/allOf/0/$ref",
                        "absoluteKeywordLocation": "http://localhost:1234/nested.json#foo#/foo",
                        "instanceLocation": "#",
                        "errors": [
                          {
                            "valid": false,
                            "keywordLocation": "#/allOf/0/$ref/type",
                            "absoluteKeywordLocation": "http://localhost:1234/nested.json#foo#/foo/type",
                            "instanceLocation": "#"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "valid": true,
                "keywordLocation": "#/$defs",
                "instanceLocation": "#"
              }
            ]
          }
        }
      }
    ]
  }
]