[
  {
    "description": "patternProperties validates properties matching a regex",
    "schema": {"patternProperties": {"f.*o": {"type": "integer"}}},
    "tests": [
      {
        "description": "a single valid match is valid",
        "data": {"foo": 1},
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/patternProperties",
                "instanceLocation": "#",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/patternProperties/f.*o",
                    "instanceLocation": "#/foo",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/patternProperties/f.*o/type",
                        "instanceLocation": "#/foo"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      },
      {
        "description": "multiple valid matches is valid",
        "data": {"foo": 1, "foooooo": 2},
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/patternProperties",
                "instanceLocation": "#",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/patternProperties/f.*o",
                    "instanceLocation": "#/foo",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/patternProperties/f.*o/type",
                        "instanceLocation": "#/foo"
                      }
                    ]
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/patternProperties/f.*o",
                    "instanceLocation": "#/foooooo",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/patternProperties/f.*o/type",
                        "instanceLocation": "#/foooooo"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      },
      {
        "description": "a single invalid match is invalid",
        "data": {"foo": "bar", "fooooo": 2},
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "keywordLocation": "#/patternProperties/f.*o/type",
            "instanceLocation": "#/foo"
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/patternProperties/f.*o/type",
            "instanceLocation": "#/foo"
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/patternProperties",
                "instanceLocation": "#",
                "errors": [
                  {
                    "valid": false,
                    "keywordLocation": "#/patternProperties/f.*o",
                    "instanceLocation": "#/foo",
                    "errors": [
                      {
                        "valid": false,
                        "keywordLocation": "#/patternProperties/f.*o/type",
                        "instanceLocation": "#/foo"
                      }
                    ]
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/patternProperties/f.*o",
                    "instanceLocation": "#/fooooo",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/patternProperties/f.*o/type",
                        "instanceLocation": "#/fooooo"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      },
      {
        "description": "multiple invalid matches is invalid",
        "data": {"foo": "bar", "foooooo": "baz"},
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/patternProperties",
                "instanceLocation": "#"
              },
              {
                "valid": false,
                "keywordLocation": "#/patternProperties/f.*o/type",
                "instanceLocation": "#/foo"
              },
              {
                "valid": false,
                "keywordLocation": "#/patternProperties/f.*o/type",
                "instanceLocation": "#/foooooo"
              }
            ]
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/patternProperties",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/patternProperties/f.*o/type",
                "instanceLocation": "#/foo"
              },
              {
                "valid": false,
                "keywordLocation": "#/patternProperties/f.*o/type",
                "instanceLocation": "#/foooooo"
              }
            ]
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/patternProperties",
                "instanceLocation": "#",
                "errors": [
                  {
                    "valid": false,
                    "keywordLocation": "#/patternProperties/f.*o",
                    "instanceLocation": "#/foo",
                    "errors": [
                      {
                        "valid": false,
                        "keywordLocation": "#/patternProperties/f.*o/type",
                        "instanceLocation": "#/foo"
                      }
                    ]
                  },
                  {
                    "valid": false,
                    "keywordLocation": "#/patternProperties/f.*o",
                    "instanceLocation": "#/foooooo",
                    "errors": [
                      {
                        "valid": false,
                        "keywordLocation": "#/patternProperties/f.*o/type",
                        "instanceLocation": "#/foooooo"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      },
      {
        "description": "ignores arrays",
        "data": ["foo"],
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/patternProperties",
                "instanceLocation": "#"
              }
            ]
          }
        }
      },
      {
        "description": "ignores strings",
        "data": "foo",
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/patternProperties",
                "instanceLocation": "#"
              }
            ]
          }
        }
      },
      {
        "description": "ignores other non-objects",
        "data": 12,
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/patternProperties",
                "instanceLocation": "#"
              }
            ]
          }
        }
      }
    ]
  },
  {
    "description": "multiple simultaneous patternProperties are validated",
    "schema": {
      "patternProperties": {"a*": {"type": "integer"}, "aaa*": {"maximum": 20}}
    },
    "tests": [
      {
        "description": "a single valid match is valid",
        "data": {"a": 21},
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/patternProperties",
                "instanceLocation": "#",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/patternProperties/a*",
                    "instanceLocation": "#/a",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/patternProperties/a*/type",
                        "instanceLocation": "#/a"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      },
      {
        "description": "a simultaneous match is valid",
        "data": {"aaaa": 18},
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/patternProperties",
                "instanceLocation": "#",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/patternProperties/a*",
                    "instanceLocation": "#/aaaa",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/patternProperties/a*/type",
                        "instanceLocation": "#/aaaa"
                      }
                    ]
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/patternProperties/aaa*",
                    "instanceLocation": "#/aaaa",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/patternProperties/aaa*/maximum",
                        "instanceLocation": "#/aaaa"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      },
      {
        "description": "multiple matches is valid",
        "data": {"a": 21, "aaaa": 18},
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/patternProperties",
                "instanceLocation": "#",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/patternProperties/a*",
                    "instanceLocation": "#/a",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/patternProperties/a*/type",
                        "instanceLocation": "#/a"
                      }
                    ]
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/patternProperties/a*",
                    "instanceLocation": "#/aaaa",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/patternProperties/a*/type",
                        "instanceLocation": "#/aaaa"
                      }
                    ]
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/patternProperties/aaa*",
                    "instanceLocation": "#/aaaa",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/patternProperties/aaa*/maximum",
                        "instanceLocation": "#/aaaa"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      },
      {
        "description": "an invalid due to one is invalid",
        "data": {"a": "bar"},
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "keywordLocation": "#/patternProperties/a*/type",
            "instanceLocation": "#/a"
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/patternProperties/a*/type",
            "instanceLocation": "#/a"
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/patternProperties",
                "instanceLocation": "#",
                "errors": [
                  {
                    "valid": false,
                    "keywordLocation": "#/patternProperties/a*",
                    "instanceLocation": "#/a",
                    "errors": [
                      {
                        "valid": false,
                        "keywordLocation": "#/patternProperties/a*/type",
                        "instanceLocation": "#/a"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      },
      {
        "description": "an invalid due to the other is invalid",
        "data": {"aaaa": 31},
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "keywordLocation": "#/patternProperties/aaa*/maximum",
            "instanceLocation": "#/aaaa"
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/patternProperties/aaa*/maximum",
            "instanceLocation": "#/aaaa"
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/patternProperties",
                "instanceLocation": "#",
                "errors": [
                  {
                    "valid": true,
                    "keywordLocation": "#/patternProperties/a*",
                    "instanceLocation": "#/aaaa",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/patternProperties/a*/type",
                        "instanceLocation": "#/aaaa"
                      }
                    ]
                  },
                  {
                    "valid": false,
                    "keywordLocation": "#/patternProperties/aaa*",
                    "instanceLocation": "#/aaaa",
                    "errors": [
                      {
                        "valid": false,
                        "keywordLocation": "#/patternProperties/aaa*/maximum",
                        "instanceLocation": "#/aaaa"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      },
      {
        "description": "an invalid due to both is invalid",
        "data": {"aaa": "foo", "aaaa": 31},
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/patternProperties",
                "instanceLocation": "#"
              },
              {
                "valid": false,
                "keywordLocation": "#/patternProperties/a*/type",
                "instanceLocation": "#/aaa"
              },
              {
                "valid": false,
                "keywordLocation": "#/patternProperties/aaa*/maximum",
                "instanceLocation": "#/aaaa"
              }
            ]
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/patternProperties",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/patternProperties/a*/type",
                "instanceLocation": "#/aaa"
              },
              {
                "valid": false,
                "keywordLocation": "#/patternProperties/aaa*/maximum",
                "instanceLocation": "#/aaaa"
              }
            ]
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/patternProperties",
                "instanceLocation": "#",
                "errors": [
                  {
                    "valid": false,
                    "keywordLocation": "#/patternProperties/a*",
                    "instanceLocation": "#/aaa",
                    "errors": [
                      {
                        "valid": false,
                        "keywordLocation": "#/patternProperties/a*/type",
                        "instanceLocation": "#/aaa"
                      }
                    ]
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/patternProperties/a*",
                    "instanceLocation": "#/aaaa",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/patternProperties/a*/type",
                        "instanceLocation": "#/aaaa"
                      }
                    ]
                  },
                  {
                    "valid": true,
                    "keywordLocation": "#/patternProperties/aaa*",
                    "instanceLocation": "#/aaa",
                    "annotations": [
                      {
                        "valid": true,
                        "keywordLocation": "#/patternProperties/aaa*/maximum",
                        "instanceLocation": "#/aaa"
                      }
                    ]
                  },
                  {
                    "valid": false,
                    "keywordLocation": "#/patternProperties/aaa*",
                    "instanceLocation": "#/aaaa",
                    "errors": [
                      {
                        "valid": false,
                        "keywordLocation": "#/patternProperties/aaa*/maximum",
                        "instanceLocation": "#/aaaa"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      }
    ]
  },
  {
    "description": "regexes are not anchored by default and are case sensitive",
    "schema": {
      "patternProperties": {
        "[0-9]{2,}": {"type": "boolean"},
        "X_": {"type": "string"}
      }
    },
    "tests": [
      {
        "description": "non recognized members are ignored",
        "data": {"answer 1": "42"},
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/patternProperties",
                "instanceLocation": "#"
              }
            ]
          }
        }
      },
      {
        "description": "recognized members are accounted for",
        "data": {"a31b": null},
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "keywordLocation": "#/patternProperties/[0-9]{2,}/type",
            "instanceLocation": "#/a31b"
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/patternProperties/[0-9]{2,}/type",
            "instanceLocation": "#/a31b"
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/patternProperties",
                "instanceLocation": "#",
                "errors": [
                  {
                    "valid": false,
                    "keywordLocation": "#/patternProperties/[0-9]{2,}",
                    "instanceLocation": "#/a31b",
                    "errors": [
                      {
                        "valid": false,
                        "keywordLocation": "#/patternProperties/[0-9]{2,}/type",
                        "instanceLocation": "#/a31b"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      },
      {
        "description": "regexes are case sensitive",
        "data": {"a_x_3": 3},
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/patternProperties",
                "instanceLocation": "#"
              }
            ]
          }
        }
      },
      {
        "description": "regexes are case sensitive, 2",
        "data": {"a_X_3": 3},
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "keywordLocation": "#/patternProperties/X_/type",
            "instanceLocation": "#/a_X_3"
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/patternProperties/X_/type",
            "instanceLocation": "#/a_X_3"
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/patternProperties",
                "instanceLocation": "#",
                "errors": [
                  {
                    "valid": false,
                    "keywordLocation": "#/patternProperties/X_",
                    "instanceLocation": "#/a_X_3",
                    "errors": [
                      {
                        "valid": false,
                        "keywordLocation": "#/patternProperties/X_/type",
                        "instanceLocation": "#/a_X_3"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      }
    ]
  },
  {
    "description": "patternProperties with boolean schemas",
    "schema": {"patternProperties": {"f.*": true, "b.*": false}},
    "tests": [
      {
        "description": "object with property matching schema true is valid",
        "data": {"foo": 1},
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/patternProperties",
                "instanceLocation": "#",
                "annotations": [
                  {
                    "valid": true,
                    "keywordLocation": "#/patternProperties/f.*",
                    "instanceLocation": "#/foo"
                  }
                ]
              }
            ]
          }
        }
      },
      {
        "description": "object with property matching schema false is invalid",
        "data": {"bar": 2},
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "keywordLocation": "#/patternProperties/b.*",
            "instanceLocation": "#/bar"
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/patternProperties/b.*",
            "instanceLocation": "#/bar"
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/patternProperties",
                "instanceLocation": "#",
                "errors": [
                  {
                    "valid": false,
                    "keywordLocation": "#/patternProperties/b.*",
                    "instanceLocation": "#/bar"
                  }
                ]
              }
            ]
          }
        }
      },
      {
        "description": "object with both properties is invalid",
        "data": {"foo": 1, "bar": 2},
        "valid": false,
        "output": {
          "basic": {
            "valid": false,
            "keywordLocation": "#/patternProperties/b.*",
            "instanceLocation": "#/bar"
          },
          "detailed": {
            "valid": false,
            "keywordLocation": "#/patternProperties/b.*",
            "instanceLocation": "#/bar"
          },
          "verbose": {
            "valid": false,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "errors": [
              {
                "valid": false,
                "keywordLocation": "#/patternProperties",
                "instanceLocation": "#",
                "errors": [
                  {
                    "valid": true,
                    "keywordLocation": "#/patternProperties/f.*",
                    "instanceLocation": "#/foo"
                  },
                  {
                    "valid": false,
                    "keywordLocation": "#/patternProperties/b.*",
                    "instanceLocation": "#/bar"
                  }
                ]
              }
            ]
          }
        }
      },
      {
        "description": "empty object is valid",
        "data": {},
        "valid": true,
        "output": {
          "basic": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "detailed": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#"
          },
          "verbose": {
            "valid": true,
            "keywordLocation": "#",
            "instanceLocation": "#",
            "annotations": [
              {
                "valid": true,
                "keywordLocation": "#/patternProperties",
                "instanceLocation": "#"
              }
            ]
          }
        }
      }
    ]
  }
]